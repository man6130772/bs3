/**
 * OCP - Omni Channel Platform
 * @version 1.0.1
 * @contact wu.h1
 * @update 2017/1/6 15:16
 */
function setSwitchText(){var t=$("#sideNavSwitch"),e=t.hasClass("active")?"展开":"收缩";t.tooltip("hide").attr("data-original-title",e).tooltip()}!function(t){var e={nav:"#nav",switchBtn:"#sideNavSwitch",navData:null,init:function(t,e){this.opts=e,this.target=t,this.getData()},getData:function(){var e=this;(e.opts.url||e.opts.data)&&(e.opts.url&&t.getJSON(e.opts.url,function(t){"string"==typeof t&&(t=jQuery.parseJSON(t)),e.navData=t[0].children,e.renderHtml()}),!e.opts.url&&e.opts.data&&(e.navData=e.opts.data[0].children,e.renderHtml()))},getUrl:function(t){var e=t.indexOf("http")!=-1?t:BasePath+t;return e},renderHtml:function(){function e(n,s){i.push('<ul class="nav dk level_'+s+'">'),t.each(n,function(t,n){var l=n.children?"i i-plus2":"i i-dot",o=n.attributes.url?a.getUrl(n.attributes.url):"javascript:void(0);";o.indexOf("http")!=-1?"_blank":"_self";i.push('<li id="level-'+s+"-"+n.id+'">'),i.push('<a href="'+o+'" class="auto"><i class="'+l+'"></i><span>'+n.text+"</span></a>"),n.children&&n.children.length>0&&(s++,e(n.children,s)),i.push("</li>")}),i.push("</ul>")}var a=this,i=[];i.push('<div class="text-muted text-sm hidden-nav-xs padder"></div>'),i.push('<ul class="nav nav-main side-nav" data-ride="collapse">'),t.each(a.navData,function(t,n){var s=n.attributes.url?a.getUrl(n.attributes.url):"javascript:void(0);",l=["i i-stack","i i-statistics","i i-settings","i i-book","i i-data","i i-bars","i i-search","i i-params"],o=n.icon?n.icon:l[t];i.push('<li id="level-1-'+n.id+'" class=" level_1">'),i.push('<a href="'+s+'" class="auto">'),i.push('<span class="pull-right text-muted"><i class="i i-circle-sm-o text"></i><i class="i i-circle-sm text-success-dk text-active"></i></span>'),i.push('<i class="'+o+' icon"></i><span class="font-bold">'+n.text+"</span></a>"),n.children&&e(n.children,2),i.push("</li>")}),i.push("</ul>"),t(a.target).html(i.join("")),a.afterLoadNav()},afterLoadNav:function(){var t=this;t.opts.mini&&t.collapse(),t.autoOpenNav(),t.bindEvents(),t.opts.afterLoad.call()},autoOpenNav:function(){var e=this,a=location.pathname,i=t('a[href*="'+a+'"]',t(e.target)).parent("li"),n=localStorage.getItem("sideNavLevelId");i.length>0?(i.addClass("active"),i.parents("li").addClass("active")):(t("#"+n,t(e.target)).addClass("active"),t("#"+n,t(e.target)).parents("li").addClass("active"))},bindEvents:function(){t(document).off("click.sideNav").on("click.sideNav",".side-nav .nav a",function(){var e=t(this).parent("li").attr("id");localStorage.setItem("sideNavLevelId",e)})},expand:function(e){var a=this;t(a.switchBtn).click(),setSwitchText()},collapse:function(e){var a=this;t(a.switchBtn).click(),setSwitchText()}};t.fn.sideNav=function(a,i){if("string"==typeof a)return t.fn.sideNav.methods[a](this,i);var a=t.extend({},t.fn.sideNav.defaults,a);this.each(function(){e.init(this,a)})},t.fn.sideNav.methods={expand:function(t){return t.each(function(){e.expand(t)})},collapse:function(t){return t.each(function(){e.collapse(t)})}},t.fn.sideNav.defaults={url:null,data:null,mini:!1,afterLoad:function(){}}}(jQuery),$(function(){$(document).on("click",'[data-toggle^="class"]',function(t){t&&t.preventDefault();var e,a,i,n,s,l=$(t.target);!l.data("toggle")&&(l=l.closest('[data-toggle^="class"]')),e=l.data().toggle,a=l.data("target")||l.attr("href"),e&&(i=e.split(":")[1])&&(n=i.split(",")),a&&(s=a.split(",")),n&&n.length&&$.each(s,function(t,e){if(n[t].indexOf("*")!==-1){var a=new RegExp("\\s"+n[t].replace(/\*/g,"[A-Za-z0-9-_]+").split(" ").join("\\s|\\s")+"\\s","g");$(l).each(function(t,e){for(var i=" "+e.className+" ";a.test(i);)i=i.replace(a," ");e.className=$.trim(i)})}"#"!=s[t]&&$(s[t]).toggleClass(n[t])||l.toggleClass(n[t])}),l.toggleClass("active"),l.attr("href").indexOf("#nav")!=-1&&setSwitchText()}),$(document).on("click",".panel-toggle",function(t){t&&t.preventDefault();var e,a=$(t.target),i="collapse";a.is("a")||(a=a.closest("a")),e=a.closest(".panel"),e.find(".panel-body").toggleClass(i),a.toggleClass("active")}),$.fn.dropdown.Constructor.prototype.change=function(t){t.preventDefault();var e,a,i,n=$(t.target),s=!1;!n.is("a")&&(n=n.closest("a")),a=n.closest(".dropdown-menu"),i=a.parent().find(".dropdown-label"),$labelHolder=i.text(),e=n.find("input"),s=e.is(":checked"),e.is(":disabled")||"radio"==e.attr("type")&&s||("radio"==e.attr("type")&&a.find("li").removeClass("active"),n.parent().removeClass("active"),!s&&n.parent().addClass("active"),e.prop("checked",!e.prop("checked")),$items=a.find("li > a > input:checked"),$items.length?($text=[],$items.each(function(){var t=$(this).parent().text();t&&$text.push($.trim(t))}),$text=$text.length<4?$text.join(", "):$text.length+" selected",i.html($text)):i.html(i.data("placeholder")))},$(document).on("click.dropdown-menu",".dropdown-select > li > a",$.fn.dropdown.Constructor.prototype.change),$(document).on("click",'[data-ride="collapse"] a',function(t){var e,a=$(t.target);a.is("a")||(a=a.closest("a")),e=a.parent().siblings(".active"),e&&e.toggleClass("active").find("> ul:visible").slideUp(200),a.parent().hasClass("active")&&a.next().slideUp(200)||a.next().slideDown(200),a.parent().toggleClass("active"),a.next().is("ul")&&t.preventDefault(),setTimeout(function(){$(document).trigger("updateNav")},300)}),$(document).on("click.bs.dropdown.data-api",".dropdown .on, .dropup .on, .open .on",function(t){t.stopPropagation()}),$(".no-touch .slim-scroll").each(function(){var t,e=$(this),a=e.data();e.slimScroll(a),$(window).resize(function(i){clearTimeout(t),t=setTimeout(function(){e.slimScroll(a)},500)}),$(document).on("updateNav",function(){e.slimScroll(a)})}),$(".selectpicker").selectpicker(),$("body").tooltip({selector:'[data-toggle="tooltip"],[rel="tooltip"]'}),$("body").popover({selector:'[data-toggle="popover"],[rel="popover"]'})});