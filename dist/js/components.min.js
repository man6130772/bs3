/**
 * OCP - Omni Channel Platform
 * @version 1.0.1
 * @contact wu.h1
 * @update 2017/1/6 15:16
 */
!function(e,t,i,n){"use strict";var s="treeview",o={};o.settings={injectStyle:!0,levels:2,expandIcon:"fa fa-plus",collapseIcon:"fa fa-minus",emptyIcon:"glyphicon",nodeIcon:"",selectedIcon:"",checkedIcon:"glyphicon glyphicon-check",uncheckedIcon:"glyphicon glyphicon-unchecked",color:n,backColor:n,borderColor:n,onhoverColor:"#F5F5F5",selectedColor:"#FFFFFF",selectedBackColor:"#1ccacc",searchResultColor:"#D9534F",searchResultBackColor:n,enableLinks:!1,highlightSelected:!0,highlightSearchResults:!0,showBorder:!0,showIcon:!0,showCheckbox:!1,showTags:!1,multiSelect:!1,noSelectParent:!1,onNodeChecked:n,onNodeCollapsed:n,onNodeDisabled:n,onNodeEnabled:n,onNodeExpanded:n,onNodeSelected:n,onNodeUnchecked:n,onNodeUnselected:n,onSearchComplete:n,onSearchCleared:n},o.options={silent:!1,ignoreChildren:!1},o.searchOptions={ignoreCase:!0,exactMatch:!1,revealResults:!0};var a=function(t,i){return this.$element=e(t),this.elementId=t.id,this.styleId=this.elementId+"-style",this.init(i),{options:this.options,init:e.proxy(this.init,this),remove:e.proxy(this.remove,this),getNode:e.proxy(this.getNode,this),getParent:e.proxy(this.getParent,this),getSiblings:e.proxy(this.getSiblings,this),getSelected:e.proxy(this.getSelected,this),getUnselected:e.proxy(this.getUnselected,this),getExpanded:e.proxy(this.getExpanded,this),getCollapsed:e.proxy(this.getCollapsed,this),getChecked:e.proxy(this.getChecked,this),getUnchecked:e.proxy(this.getUnchecked,this),getDisabled:e.proxy(this.getDisabled,this),getEnabled:e.proxy(this.getEnabled,this),selectNode:e.proxy(this.selectNode,this),unselectNode:e.proxy(this.unselectNode,this),toggleNodeSelected:e.proxy(this.toggleNodeSelected,this),collapseAll:e.proxy(this.collapseAll,this),collapseNode:e.proxy(this.collapseNode,this),expandAll:e.proxy(this.expandAll,this),expandNode:e.proxy(this.expandNode,this),toggleNodeExpanded:e.proxy(this.toggleNodeExpanded,this),revealNode:e.proxy(this.revealNode,this),checkAll:e.proxy(this.checkAll,this),checkNode:e.proxy(this.checkNode,this),uncheckAll:e.proxy(this.uncheckAll,this),uncheckNode:e.proxy(this.uncheckNode,this),toggleNodeChecked:e.proxy(this.toggleNodeChecked,this),unselectAll:e.proxy(this.unselectAll,this),disableAll:e.proxy(this.disableAll,this),disableNode:e.proxy(this.disableNode,this),enableAll:e.proxy(this.enableAll,this),enableNode:e.proxy(this.enableNode,this),toggleNodeDisabled:e.proxy(this.toggleNodeDisabled,this),search:e.proxy(this.search,this),clearSearch:e.proxy(this.clearSearch,this)}};a.prototype.init=function(t){this.tree=[],this.nodes=[],t.data&&("string"==typeof t.data&&(t.data=e.parseJSON(t.data)),this.tree=e.extend(!0,[],t.data),delete t.data),this.options=e.extend({},o.settings,t),this.destroy(),this.subscribeEvents(),this.setInitialStates({nodes:this.tree},0),this.render()},a.prototype.remove=function(){this.destroy(),e.removeData(this,s),e("#"+this.styleId).remove()},a.prototype.destroy=function(){this.initialized&&(this.$wrapper.remove(),this.$wrapper=null,this.unsubscribeEvents(),this.initialized=!1)},a.prototype.unsubscribeEvents=function(){this.$element.off("click"),this.$element.off("nodeChecked"),this.$element.off("nodeCollapsed"),this.$element.off("nodeDisabled"),this.$element.off("nodeEnabled"),this.$element.off("nodeExpanded"),this.$element.off("nodeSelected"),this.$element.off("nodeUnchecked"),this.$element.off("nodeUnselected"),this.$element.off("searchComplete"),this.$element.off("searchCleared")},a.prototype.subscribeEvents=function(){this.unsubscribeEvents(),this.$element.on("click",e.proxy(this.clickHandler,this)),"function"==typeof this.options.onNodeChecked&&this.$element.on("nodeChecked",this.options.onNodeChecked),"function"==typeof this.options.onNodeCollapsed&&this.$element.on("nodeCollapsed",this.options.onNodeCollapsed),"function"==typeof this.options.onNodeDisabled&&this.$element.on("nodeDisabled",this.options.onNodeDisabled),"function"==typeof this.options.onNodeEnabled&&this.$element.on("nodeEnabled",this.options.onNodeEnabled),"function"==typeof this.options.onNodeExpanded&&this.$element.on("nodeExpanded",this.options.onNodeExpanded),"function"==typeof this.options.onNodeSelected&&this.$element.on("nodeSelected",this.options.onNodeSelected),"function"==typeof this.options.onNodeUnchecked&&this.$element.on("nodeUnchecked",this.options.onNodeUnchecked),"function"==typeof this.options.onNodeUnselected&&this.$element.on("nodeUnselected",this.options.onNodeUnselected),"function"==typeof this.options.onSearchComplete&&this.$element.on("searchComplete",this.options.onSearchComplete),"function"==typeof this.options.onSearchCleared&&this.$element.on("searchCleared",this.options.onSearchCleared)},a.prototype.setInitialStates=function(t,i){if(t.nodes){i+=1;var n=t,s=this;e.each(t.nodes,function(e,t){t.nodeId=s.nodes.length,t.parentId=n.nodeId,t.hasOwnProperty("selectable")||(1==s.options.noSelectParent&&t.nodes?t.selectable=!1:t.selectable=!0),t.state=t.state||{},t.state.hasOwnProperty("checked")||(t.state.checked=!1),t.state.hasOwnProperty("disabled")||(t.state.disabled=!1),t.state.hasOwnProperty("expanded")||(!t.state.disabled&&i<s.options.levels&&t.nodes&&t.nodes.length>0?t.state.expanded=!0:t.state.expanded=!1),t.state.hasOwnProperty("selected")||(t.state.selected=!1),s.nodes.push(t),t.nodes&&s.setInitialStates(t,i)})}},a.prototype.clickHandler=function(t){this.options.enableLinks||t.preventDefault();var i=e(t.target),n=this.findNode(i);if(n&&!n.state.disabled){var s=i.attr("class")?i.attr("class").split(" "):[];s.indexOf("expand-icon")!==-1?(this.toggleExpandedState(n,o.options),this.render()):s.indexOf("check-icon")!==-1?(this.toggleCheckedState(n,o.options),this.render()):(n.selectable?this.toggleSelectedState(n,o.options):this.toggleExpandedState(n,o.options),this.render())}},a.prototype.findNode=function(e){var t=e.closest("li.list-group-item").attr("data-nodeid"),i=this.nodes[t];return i||console.log("Error: node does not exist"),i},a.prototype.toggleExpandedState=function(e,t){e&&this.setExpandedState(e,!e.state.expanded,t)},a.prototype.setExpandedState=function(t,i,n){i!==t.state.expanded&&(i&&t.nodes?(t.state.expanded=!0,n.silent||this.$element.trigger("nodeExpanded",e.extend(!0,{},t))):i||(t.state.expanded=!1,n.silent||this.$element.trigger("nodeCollapsed",e.extend(!0,{},t)),t.nodes&&!n.ignoreChildren&&e.each(t.nodes,e.proxy(function(e,t){this.setExpandedState(t,!1,n)},this))))},a.prototype.toggleSelectedState=function(e,t){e&&this.setSelectedState(e,!e.state.selected,t)},a.prototype.setSelectedState=function(t,i,n){i!==t.state.selected&&(i?(this.options.multiSelect||e.each(this.findNodes("true","g","state.selected"),e.proxy(function(e,t){this.setSelectedState(t,!1,n)},this)),t.state.selected=!0,n.silent||this.$element.trigger("nodeSelected",e.extend(!0,{},t))):(t.state.selected=!1,n.silent||this.$element.trigger("nodeUnselected",e.extend(!0,{},t))))},a.prototype.toggleCheckedState=function(e,t){e&&this.setCheckedState(e,!e.state.checked,t)},a.prototype.setCheckedState=function(t,i,n){i!==t.state.checked&&(i?(t.state.checked=!0,n.silent||this.$element.trigger("nodeChecked",e.extend(!0,{},t))):(t.state.checked=!1,n.silent||this.$element.trigger("nodeUnchecked",e.extend(!0,{},t))))},a.prototype.setDisabledState=function(t,i,n){i!==t.state.disabled&&(i?(t.state.disabled=!0,this.setExpandedState(t,!1,n),this.setSelectedState(t,!1,n),this.setCheckedState(t,!1,n),n.silent||this.$element.trigger("nodeDisabled",e.extend(!0,{},t))):(t.state.disabled=!1,n.silent||this.$element.trigger("nodeEnabled",e.extend(!0,{},t))))},a.prototype.render=function(){function t(){for(var t=1,i=20,n=15,s=20;e(".indent-layer-"+t).length;){var o=e(".indent-layer-"+t);1==t?(o.css({left:i,width:n}),i+=n,t++):(o.css({left:i,width:s}),i+=s,t++)}if(e(".icon.glyphicon").length){var a=e(".icon.glyphicon");a.each(function(t,i){e('<i class="indent-line indent-layer-last"></i>').appendTo(i)})}}this.initialized||(this.$element.addClass(s),this.$wrapper=e(this.template.list),this.injectStyle(),this.initialized=!0),this.$element.empty().append(this.$wrapper.empty()),this.buildTree(this.tree,0),t()},a.prototype.buildTree=function(t,i){if(t){i+=1;var n=this;e.each(t,function(t,s){var o=e(n.template.item).addClass("node-"+n.elementId).addClass(s.state.checked?"node-checked":"").addClass(s.state.disabled?"node-disabled":"").addClass(s.state.selected?"node-selected":"").addClass(s.searchResult?"search-result":"").attr("data-nodeid",s.nodeId).attr("style",n.buildStyleOverride(s));if(n.options.indexId){var a=s.attributes[n.options.indexId]||"";o.attr("data-indexId",a)}for(var l=0;l<i-1;l++){var r='<i class="indent-line indent-layer-'+(l+1)+'"></i>',d=e(n.template.indent).appendTo(o);d.append(r)}var c=[];if(s.nodes?(c.push("expand-icon"),s.state.expanded?c.push(n.options.collapseIcon):c.push(n.options.expandIcon)):c.push(n.options.emptyIcon),o.append(e(n.template.icon).addClass(c.join(" "))),n.options.showIcon){var c=["node-icon"];c.push(s.icon||n.options.nodeIcon),s.state.selected&&(c.pop(),c.push(s.selectedIcon||n.options.selectedIcon||s.icon||n.options.nodeIcon)),o.append(e(n.template.icon).addClass(c.join(" ")))}if(n.options.showCheckbox){var c=["check-icon"];s.state.checked?c.push(n.options.checkedIcon):c.push(n.options.uncheckedIcon),o.append(e(n.template.icon).addClass(c.join(" ")))}if(n.options.enableLinks?o.append(e(n.template.link).attr("href",s.href).append(s.text)):o.append(s.text),n.options.showTags&&s.tags&&e.each(s.tags,function(t,i){o.append(e(n.template.badge).append(i))}),n.$wrapper.append(o),s.nodes&&s.state.expanded&&!s.state.disabled)return n.buildTree(s.nodes,i)})}},a.prototype.buildStyleOverride=function(e){if(e.state.disabled)return"";var t=e.color,i=e.backColor;return this.options.highlightSelected&&e.state.selected&&(this.options.selectedColor&&(t=this.options.selectedColor),this.options.selectedBackColor&&(i=this.options.selectedBackColor)),this.options.highlightSearchResults&&e.searchResult&&!e.state.disabled&&(this.options.searchResultColor&&(t=this.options.searchResultColor),this.options.searchResultBackColor&&(i=this.options.searchResultBackColor)),"color:"+t+";background-color:"+i+";"},a.prototype.injectStyle=function(){this.options.injectStyle&&!i.getElementById(this.styleId)&&e('<style type="text/css" id="'+this.styleId+'"> '+this.buildStyle()+" </style>").appendTo("head")},a.prototype.buildStyle=function(){var e=".node-"+this.elementId+"{";return this.options.color&&(e+="color:"+this.options.color+";"),this.options.backColor&&(e+="background-color:"+this.options.backColor+";"),this.options.showBorder?this.options.borderColor&&(e+="border:1px solid "+this.options.borderColor+";"):e+="border:none;",e+="}",this.options.onhoverColor&&(e+=".node-"+this.elementId+":not(.node-disabled):hover{background-color:"+this.options.onhoverColor+";}"),this.css+e},a.prototype.template={list:'<ul class="list-group"></ul>',item:'<li class="list-group-item"></li>',indent:'<span class="indent"></span>',icon:'<span class="icon"></span>',link:'<a href="#" style="color:inherit;"></a>',badge:'<span class="badge"></span>'},a.prototype.css=".treeview .list-group-item{cursor:pointer}.treeview span.indent{margin-left:10px;margin-right:10px}.treeview span.icon{width:12px;margin-right:5px}.treeview .node-disabled{color:silver;cursor:not-allowed}",a.prototype.getNode=function(e){return this.nodes[e]},a.prototype.getParent=function(e){var t=this.identifyNode(e);return this.nodes[t.parentId]},a.prototype.getSiblings=function(e){var t=this.identifyNode(e),i=this.getParent(t),n=i?i.nodes:this.tree;return n.filter(function(e){return e.nodeId!==t.nodeId})},a.prototype.getSelected=function(){return this.findNodes("true","g","state.selected")},a.prototype.getUnselected=function(){return this.findNodes("false","g","state.selected")},a.prototype.getExpanded=function(){return this.findNodes("true","g","state.expanded")},a.prototype.getCollapsed=function(){return this.findNodes("false","g","state.expanded")},a.prototype.getChecked=function(){return this.findNodes("true","g","state.checked")},a.prototype.getUnchecked=function(){return this.findNodes("false","g","state.checked")},a.prototype.getDisabled=function(){return this.findNodes("true","g","state.disabled")},a.prototype.getEnabled=function(){return this.findNodes("false","g","state.disabled")},a.prototype.selectNode=function(t,i){this.forEachIdentifier(t,i,e.proxy(function(e,t){this.setSelectedState(e,!0,t)},this)),this.render()},a.prototype.unselectNode=function(t,i){this.forEachIdentifier(t,i,e.proxy(function(e,t){this.setSelectedState(e,!1,t)},this)),this.render()},a.prototype.unselectAll=function(t){var i=this.findNodes("true","g","state.selected");this.forEachIdentifier(i,t,e.proxy(function(e,t){this.setSelectedState(e,!1,t)},this)),this.render()},a.prototype.toggleNodeSelected=function(t,i){this.forEachIdentifier(t,i,e.proxy(function(e,t){this.toggleSelectedState(e,t)},this)),this.render()},a.prototype.collapseAll=function(t){var i=this.findNodes("true","g","state.expanded");this.forEachIdentifier(i,t,e.proxy(function(e,t){this.setExpandedState(e,!1,t)},this)),this.render()},a.prototype.collapseNode=function(t,i){this.forEachIdentifier(t,i,e.proxy(function(e,t){this.setExpandedState(e,!1,t)},this)),this.render()},a.prototype.expandAll=function(t){if(t=e.extend({},o.options,t),t&&t.levels)this.expandLevels(this.tree,t.levels,t);else{var i=this.findNodes("false","g","state.expanded");this.forEachIdentifier(i,t,e.proxy(function(e,t){this.setExpandedState(e,!0,t)},this))}this.render()},a.prototype.expandNode=function(t,i){this.forEachIdentifier(t,i,e.proxy(function(e,t){this.setExpandedState(e,!0,t),e.nodes&&t&&t.levels&&this.expandLevels(e.nodes,t.levels-1,t)},this)),this.render()},a.prototype.expandLevels=function(t,i,n){n=e.extend({},o.options,n),e.each(t,e.proxy(function(e,t){this.setExpandedState(t,i>0,n),t.nodes&&this.expandLevels(t.nodes,i-1,n)},this))},a.prototype.revealNode=function(t,i){this.forEachIdentifier(t,i,e.proxy(function(e,t){for(var i=this.getParent(e);i;)this.setExpandedState(i,!0,t),i=this.getParent(i)},this)),this.render()},a.prototype.toggleNodeExpanded=function(t,i){this.forEachIdentifier(t,i,e.proxy(function(e,t){this.toggleExpandedState(e,t)},this)),this.render()},a.prototype.checkAll=function(t){var i=this.findNodes("false","g","state.checked");this.forEachIdentifier(i,t,e.proxy(function(e,t){this.setCheckedState(e,!0,t)},this)),this.render()},a.prototype.checkNode=function(t,i){this.forEachIdentifier(t,i,e.proxy(function(e,t){this.setCheckedState(e,!0,t)},this)),this.render()},a.prototype.uncheckAll=function(t){var i=this.findNodes("true","g","state.checked");this.forEachIdentifier(i,t,e.proxy(function(e,t){this.setCheckedState(e,!1,t)},this)),this.render()},a.prototype.uncheckNode=function(t,i){this.forEachIdentifier(t,i,e.proxy(function(e,t){this.setCheckedState(e,!1,t)},this)),this.render()},a.prototype.toggleNodeChecked=function(t,i){this.forEachIdentifier(t,i,e.proxy(function(e,t){this.toggleCheckedState(e,t)},this)),this.render()},a.prototype.disableAll=function(t){var i=this.findNodes("false","g","state.disabled");this.forEachIdentifier(i,t,e.proxy(function(e,t){this.setDisabledState(e,!0,t)},this)),this.render()},a.prototype.disableNode=function(t,i){this.forEachIdentifier(t,i,e.proxy(function(e,t){this.setDisabledState(e,!0,t)},this)),this.render()},a.prototype.enableAll=function(t){var i=this.findNodes("true","g","state.disabled");this.forEachIdentifier(i,t,e.proxy(function(e,t){this.setDisabledState(e,!1,t)},this)),this.render()},a.prototype.enableNode=function(t,i){this.forEachIdentifier(t,i,e.proxy(function(e,t){this.setDisabledState(e,!1,t)},this)),this.render()},a.prototype.toggleNodeDisabled=function(t,i){this.forEachIdentifier(t,i,e.proxy(function(e,t){this.setDisabledState(e,!e.state.disabled,t)},this)),this.render()},a.prototype.forEachIdentifier=function(t,i,n){i=e.extend({},o.options,i),t instanceof Array||(t=[t]),e.each(t,e.proxy(function(e,t){n(this.identifyNode(t),i)},this))},a.prototype.identifyNode=function(e){return"number"==typeof e?this.nodes[e]:e},a.prototype.search=function(t,i){i=e.extend({},o.searchOptions,i),this.clearSearch({render:!1});var n=[];if(t&&t.length>0){i.exactMatch&&(t="^"+t+"$");var s="g";i.ignoreCase&&(s+="i"),n=this.findNodes(t,s),e.each(n,function(e,t){t.searchResult=!0})}return i.revealResults?this.revealNode(n):this.render(),this.$element.trigger("searchComplete",e.extend(!0,{},n)),n},a.prototype.clearSearch=function(t){t=e.extend({},{render:!0},t);var i=e.each(this.findNodes("true","g","searchResult"),function(e,t){t.searchResult=!1});t.render&&this.render(),this.$element.trigger("searchCleared",e.extend(!0,{},i))},a.prototype.findNodes=function(t,i,n){i=i||"g",n=n||"text";var s=this;return e.grep(this.nodes,function(e){var o=s.getNodeValue(e,n);if("string"==typeof o)return o.match(new RegExp(t,i))})},a.prototype.getNodeValue=function(e,t){var i=t.indexOf(".");if(i>0){var s=e[t.substring(0,i)],o=t.substring(i+1,t.length);return this.getNodeValue(s,o)}return e.hasOwnProperty(t)?e[t].toString():n};var l=function(e){t.console&&t.console.error(e)};e.fn[s]=function(t,i){var n;return this.each(function(){var o=e.data(this,s);"string"==typeof t?o?e.isFunction(o[t])&&"_"!==t.charAt(0)?(i instanceof Array||(i=[i]),n=o[t].apply(o,i)):l("No such method : "+t):l("Not initialized, can not call method : "+t):"boolean"==typeof t?n=o:e.data(this,s,new a(this,e.extend(!0,{},t)))}),n||this}}(jQuery,window,document),function(e){function t(t,i){function n(t,i){var n=i.nodeId;a===!0&&e(t).treeview("selectNode",[n,{silent:!0}]),a===!1&&e(t).treeview("unselectNode",[n,{silent:!0}])}function s(t,i,a){if(e.isArray(i.nodes)&&i.nodes.length>0&&!a){for(var l in i.nodes){var r=i.nodes[l];s(t,r)}i.nodeId!==o&&n(t,i)}else if(i.nodeId==o||a&&null!=i.parentId){var d,c=e(t).treeview("getParent",i);for(var l in c.nodes){var h=c.nodes[l],p=h.state.selected;0==l&&(d=p),0!=l&&(d=d&&p)}d===!0&&e(t).treeview("selectNode",[c.nodeId,{silent:!0}]),d===!1&&e(t).treeview("unselectNode",[c.nodeId,{silent:!0}]),null!=c.parentId&&s(t,c,!0)}else i.nodeId!==o&&n(t,i)}var o=i.nodeId,a=i.state.selected;s(t,i)}function i(t,i){var n=e(t).data("treeview").options,s=n.dropdownlist.$button,o=s.find(".filter-option");if(o.text()==o.data("placeholder"))o.text(i.text);else{var a=o.text().split(",");a.push(i.text);var l=a.join(",");o.text(l)}}function n(t,i){var n=e(t).data("treeview").options,s=n.dropdownlist.$button,o=s.find(".filter-option"),a=o.text().split(","),l=[];e.each(a,function(e,t){t!=i.text&&l.push(t)});var r=l.join(",");r?o.text(r):o.text(o.data("placeholder"))}function s(e){var t=e.onNodeSelected,s=e.onNodeUnselected;e.onNodeSelected=function(e,n){i(this,n),"function"==typeof s&&t.call(this,e,n)},e.onNodeUnselected=function(e,t){n(this,t),"function"==typeof s&&s.call(this,e,t)}}function o(t){var i='<div class="btn-group bootstrap-select form-control"></div>';t.dropdownlist.$wrapper=e(i).insertBefore(this)}function a(t){var i=this.attr("placeholder")||"请选择",n='<button data-toggle="dropdown" class="btn btn-default dropdown-toggle"><span class="filter-option pull-left" data-placeholder="'+i+'">'+i+'</span> <span class="caret"></span></button>';t.dropdownlist.$button=e(n).appendTo(t.dropdownlist.$wrapper)}function l(t){var i=t.dropdownHeight||300,n=t.dropdownWidth?" width: "+t.dropdownWidth+"px; ":"",o='<div class="dropdown-menu open" style="'+n+" max-height: "+i+'px; overflow: hidden;"><div class="dropdownlist" style="max-height: '+(i-12)+'px; overflow-y: auto;"></div></div>';t.dropdownlist.$menu=e(o).appendTo(t.dropdownlist.$wrapper),s(t)}var r=e.fn.treeview;e.fn.treeview=function(i,n){if(i.selectAll===!0){var s=i.onNodeSelected,d=i.onNodeUnselected;i.onNodeSelected=function(e,i){t(this,i),"function"==typeof d&&s(e,i)},i.onNodeUnselected=function(e,i){t(this,i),"function"==typeof d&&d(e,i)}}var c=this;"dropdownlist"==i.type&&(i.dropdownlist={},o.call(this,i),a.call(this,i),l.call(this,i),i.dropdownlist.$dropdownlist=c,c=i.dropdownlist.$treeview=i.dropdownlist.$menu.find(".dropdownlist"),this.data("dropdownlist",i.dropdownlist),this.hide()),c=r.call(c,i,n);e(c).data("treeview");return"dropdownlist"==i.type&&i.dropdownlist.$menu.on("click",function(e){e.stopPropagation()}),c}}(jQuery),function(e,t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t(require("jquery")):e.bootbox=t(e.jQuery)}(this,function e(t,i){"use strict";function n(e){var t=m[f.locale];return t?t[e]:m.zh_CN[e]}function s(e,i,n){e.stopPropagation(),e.preventDefault();var s=t.isFunction(n)&&n.call(i,e)===!1;s||i.modal("hide")}function o(e){var t,i=0;for(t in e)i++;return i}function a(e,i){var n=0;t.each(e,function(e,t){i(e,t,n++)})}function l(e){var i,n;if("object"!=typeof e)throw new Error("Please supply an object of options");if(!e.message)throw new Error("Please specify a message");return e=t.extend({},f,e),e.buttons||(e.buttons={}),i=e.buttons,n=o(i),a(i,function(e,s,o){if(t.isFunction(s)&&(s=i[e]={callback:s}),"object"!==t.type(s))throw new Error("button with key "+e+" must be an object");s.label||(s.label=e),s.className||(n<=2&&o===n-1?s.className="btn-primary":s.className="btn-default")}),e}function r(e,t){var i=e.length,n={};if(i<1||i>2)throw new Error("Invalid argument length");return 2===i||"string"==typeof e[0]?(n[t[0]]=e[0],n[t[1]]=e[1]):n=e[0],n}function d(e,i,n){return t.extend(!0,{},e,r(i,n))}function c(e,t,i,n){var s={className:"bootbox-"+e,buttons:h.apply(null,t)};return p(d(s,n,i),t)}function h(){for(var e={},t=0,i=arguments.length;t<i;t++){var s=arguments[t],o=s.toLowerCase(),a=s.toUpperCase();e[o]={label:n(a)}}return e}function p(e,t){var n={};return a(t,function(e,t){n[t]=!0}),a(e.buttons,function(e){if(n[e]===i)throw new Error("button key "+e+" is not allowed (options are "+t.join("\n")+")")}),e}var u={dialog:"<div class='bootbox modal' tabindex='-1' role='dialog' aria-hidden='true'><div class='modal-dialog'><div class='modal-content'><div class='modal-body'><div class='bootbox-body'></div></div></div></div></div>",header:"<div class='modal-header'><h4 class='modal-title'></h4></div>",footer:"<div class='modal-footer'></div>",closeButton:"<button type='button' class='bootbox-close-button close' data-dismiss='modal' aria-hidden='true'>&times;</button>",form:"<form class='bootbox-form'></form>",inputs:{text:"<input class='bootbox-input bootbox-input-text form-control' autocomplete=off type=text />",textarea:"<textarea class='bootbox-input bootbox-input-textarea form-control'></textarea>",email:"<input class='bootbox-input bootbox-input-email form-control' autocomplete='off' type='email' />",select:"<select class='bootbox-input bootbox-input-select form-control'></select>",checkbox:"<div class='checkbox'><label><input class='bootbox-input bootbox-input-checkbox' type='checkbox' /></label></div>",date:"<input class='bootbox-input bootbox-input-date form-control' autocomplete=off type='date' />",time:"<input class='bootbox-input bootbox-input-time form-control' autocomplete=off type='time' />",number:"<input class='bootbox-input bootbox-input-number form-control' autocomplete=off type='number' />",password:"<input class='bootbox-input bootbox-input-password form-control' autocomplete='off' type='password' />"}},f={locale:"zh_CN",backdrop:"static",animate:!0,className:null,closeButton:!0,show:!0,container:"body"},g={};g.alert=function(){var e;if(e=c("alert",["ok"],["message","callback"],arguments),e.callback&&!t.isFunction(e.callback))throw new Error("alert requires callback property to be a function when provided");return e.buttons.ok.callback=e.onEscape=function(){return!t.isFunction(e.callback)||e.callback.call(this)},g.dialog(e)},g.confirm=function(){var e;if(e=c("confirm",["cancel","confirm"],["message","callback"],arguments),e.buttons.cancel.callback=e.onEscape=function(){return e.callback.call(this,!1)},e.buttons.confirm.callback=function(){return e.callback.call(this,!0)},!t.isFunction(e.callback))throw new Error("confirm requires a callback");return g.dialog(e)},g.prompt=function(){var e,n,s,o,l,r,c;if(o=t(u.form),n={className:"bootbox-prompt",buttons:h("cancel","confirm"),value:"",inputType:"text"},e=p(d(n,arguments,["title","callback"]),["cancel","confirm"]),r=e.show===i||e.show,e.message=o,e.buttons.cancel.callback=e.onEscape=function(){return e.callback.call(this,null)},e.buttons.confirm.callback=function(){var i;switch(e.inputType){case"text":case"textarea":case"email":case"select":case"date":case"time":case"number":case"password":i=l.val();break;case"checkbox":var n=l.find("input:checked");i=[],a(n,function(e,n){i.push(t(n).val())})}return e.callback.call(this,i)},e.show=!1,!e.title)throw new Error("prompt requires a title");if(!t.isFunction(e.callback))throw new Error("prompt requires a callback");if(!u.inputs[e.inputType])throw new Error("invalid prompt type");switch(l=t(u.inputs[e.inputType]),e.inputType){case"text":case"textarea":case"email":case"date":case"time":case"number":case"password":l.val(e.value);break;case"select":var f={};if(c=e.inputOptions||[],!t.isArray(c))throw new Error("Please pass an array of input options");if(!c.length)throw new Error("prompt with select requires options");a(c,function(e,n){var s=l;if(n.value===i||n.text===i)throw new Error("given options in wrong format");n.group&&(f[n.group]||(f[n.group]=t("<optgroup/>").attr("label",n.group)),s=f[n.group]),s.append("<option value='"+n.value+"'>"+n.text+"</option>")}),a(f,function(e,t){l.append(t)}),l.val(e.value);break;case"checkbox":var m=t.isArray(e.value)?e.value:[e.value];if(c=e.inputOptions||[],!c.length)throw new Error("prompt with checkbox requires options");if(!c[0].value||!c[0].text)throw new Error("given options in wrong format");l=t("<div/>"),a(c,function(i,n){var s=t(u.inputs[e.inputType]);s.find("input").attr("value",n.value),s.find("label").append(n.text),a(m,function(e,t){t===n.value&&s.find("input").prop("checked",!0)}),l.append(s)})}return e.placeholder&&l.attr("placeholder",e.placeholder),e.pattern&&l.attr("pattern",e.pattern),e.maxlength&&l.attr("maxlength",e.maxlength),o.append(l),o.on("submit",function(e){e.preventDefault(),e.stopPropagation(),s.find(".btn-primary").click()}),s=g.dialog(e),s.off("shown.bs.modal"),s.on("shown.bs.modal",function(){l.focus()}),r===!0&&s.modal("show"),s},g.dialog=function(e){e=l(e);var n=t(u.dialog),o=n.find(".modal-dialog"),r=n.find(".modal-body"),d=e.buttons,c="",h={onEscape:e.onEscape};if(t.fn.modal===i)throw new Error("$.fn.modal is not defined; please double check you have included the Bootstrap JavaScript library. See http://getbootstrap.com/javascript/ for more details.");if(a(d,function(e,t){c+="<button data-bb-handler='"+e+"' type='button' class='btn "+t.className+"'>"+t.label+"</button>",h[e]=t.callback}),r.find(".bootbox-body").html(e.message),e.animate===!0&&n.addClass("fade"),e.className&&n.addClass(e.className),"large"===e.size?o.addClass("modal-lg"):"small"===e.size&&o.addClass("modal-sm"),e.title&&r.before(u.header),e.closeButton){var p=t(u.closeButton);e.title?n.find(".modal-header").prepend(p):p.css("margin-top","-10px").prependTo(r)}return e.title&&n.find(".modal-title").html(e.title),c.length&&(r.after(u.footer),n.find(".modal-footer").html(c)),n.on("hidden.bs.modal",function(e){e.target===this&&n.remove()}),n.on("shown.bs.modal",function(){n.find(".btn-primary:first").focus()}),"static"!==e.backdrop&&n.on("click.dismiss.bs.modal",function(e){n.children(".modal-backdrop").length&&(e.currentTarget=n.children(".modal-backdrop").get(0)),e.target===e.currentTarget&&n.trigger("escape.close.bb")}),n.on("escape.close.bb",function(e){h.onEscape&&s(e,n,h.onEscape)}),n.on("click",".modal-footer button",function(e){var i=t(this).data("bb-handler");s(e,n,h[i])}),n.on("click",".bootbox-close-button",function(e){s(e,n,h.onEscape)}),n.on("keyup",function(e){27===e.which&&n.trigger("escape.close.bb")}),t(e.container).append(n),n.modal({backdrop:!!e.backdrop&&"static",keyboard:!1,show:!1}),e.show&&n.modal("show"),n},g.setDefaults=function(){var e={};2===arguments.length?e[arguments[0]]=arguments[1]:e=arguments[0],t.extend(f,e)},g.hideAll=function(){return t(".bootbox").modal("hide"),g};var m={ar:{OK:"موافق",CANCEL:"الغاء",CONFIRM:"تأكيد"},bg_BG:{OK:"Ок",CANCEL:"Отказ",CONFIRM:"Потвърждавам"},br:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Sim"},cs:{OK:"OK",CANCEL:"Zrušit",CONFIRM:"Potvrdit"},da:{OK:"OK",CANCEL:"Annuller",CONFIRM:"Accepter"},de:{OK:"OK",CANCEL:"Abbrechen",CONFIRM:"Akzeptieren"},el:{OK:"Εντάξει",CANCEL:"Ακύρωση",CONFIRM:"Επιβεβαίωση"},en:{OK:"OK",CANCEL:"Cancel",CONFIRM:"OK"},es:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Aceptar"},et:{OK:"OK",CANCEL:"Katkesta",CONFIRM:"OK"},fa:{OK:"قبول",CANCEL:"لغو",CONFIRM:"تایید"},fi:{OK:"OK",CANCEL:"Peruuta",CONFIRM:"OK"},fr:{OK:"OK",CANCEL:"Annuler",CONFIRM:"Confirmer"},he:{OK:"אישור",CANCEL:"ביטול",CONFIRM:"אישור"},hu:{OK:"OK",CANCEL:"Mégsem",CONFIRM:"Megerősít"},hr:{OK:"OK",CANCEL:"Odustani",CONFIRM:"Potvrdi"},id:{OK:"OK",CANCEL:"Batal",CONFIRM:"OK"},it:{OK:"OK",CANCEL:"Annulla",CONFIRM:"Conferma"},ja:{OK:"OK",CANCEL:"キャンセル",CONFIRM:"確認"},lt:{OK:"Gerai",CANCEL:"Atšaukti",CONFIRM:"Patvirtinti"},lv:{OK:"Labi",CANCEL:"Atcelt",CONFIRM:"Apstiprināt"},nl:{OK:"OK",CANCEL:"Annuleren",CONFIRM:"Accepteren"},no:{OK:"OK",CANCEL:"Avbryt",CONFIRM:"OK"},pl:{OK:"OK",CANCEL:"Anuluj",CONFIRM:"Potwierdź"},pt:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Confirmar"},ru:{OK:"OK",CANCEL:"Отмена",CONFIRM:"Применить"},sq:{OK:"OK",CANCEL:"Anulo",CONFIRM:"Prano"},sv:{OK:"OK",CANCEL:"Avbryt",CONFIRM:"OK"},th:{OK:"ตกลง",CANCEL:"ยกเลิก",CONFIRM:"ยืนยัน"},tr:{OK:"Tamam",CANCEL:"İptal",CONFIRM:"Onayla"},zh_CN:{OK:"关闭",CANCEL:"取消",CONFIRM:"确认"},zh_TW:{OK:"OK",CANCEL:"取消",CONFIRM:"確認"}};return g.addLocale=function(e,i){return t.each(["OK","CANCEL","CONFIRM"],function(e,t){if(!i[t])throw new Error("Please supply a translation for '"+t+"'")}),m[e]={OK:i.OK,CANCEL:i.CANCEL,CONFIRM:i.CONFIRM},g},g.removeLocale=function(e){return delete m[e],g},g.setLocale=function(e){return g.setDefaults("locale",e)},g.init=function(i){return e(i||t)},g}),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e("object"==typeof exports?require("jquery"):jQuery)}(function(e){function t(t){var i=!1;return e('[data-notify="container"]').each(function(n,s){var o=e(s),a=o.find('[data-notify="title"]').html().trim(),l=o.find('[data-notify="message"]').html().trim(),r=a===e("<div>"+t.settings.content.title+"</div>").html().trim(),d=l===e("<div>"+t.settings.content.message+"</div>").html().trim(),c=o.hasClass("alert-"+t.settings.type);return r&&d&&c&&(i=!0),!i}),i}function i(i,s,o){var a={content:{message:"object"==typeof s?s.message:s,title:s.title?s.title:"",icon:s.icon?s.icon:"",url:s.url?s.url:"#",target:s.target?s.target:"-"}};o=e.extend(!0,{},a,o),this.settings=e.extend(!0,{},n,o),this._defaults=n,"-"===this.settings.content.target&&(this.settings.content.target=this.settings.url_target),this.animations={start:"webkitAnimationStart oanimationstart MSAnimationStart animationstart",end:"webkitAnimationEnd oanimationend MSAnimationEnd animationend"},"number"==typeof this.settings.offset&&(this.settings.offset={x:this.settings.offset,y:this.settings.offset}),(this.settings.allow_duplicates||!this.settings.allow_duplicates&&!t(this))&&this.init()}var n={element:"body",position:null,type:"info",allow_dismiss:!0,allow_duplicates:!0,newest_on_top:!1,showProgressbar:!1,placement:{from:"top",align:"right"},offset:20,spacing:10,z_index:1061,delay:5e3,timer:1e3,url_target:"_blank",mouse_over:null,animate:{enter:"animated fadeInDown",exit:"animated fadeOutUp"},onShow:null,onShown:null,onClose:null,onClosed:null,onClick:null,icon_type:"class",template:'<div data-notify="container" class="col-xs-11 col-sm-4 alert alert-{0}" role="alert"><button type="button" aria-hidden="true" class="close" data-notify="dismiss">&times;</button><span data-notify="icon"></span> <span data-notify="title">{1}</span> <span data-notify="message">{2}</span><div class="progress" data-notify="progressbar"><div class="progress-bar progress-bar-{0}" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%;"></div></div><a href="{3}" target="{4}" data-notify="url"></a></div>'
};String.format=function(){for(var e=arguments[0],t=1;t<arguments.length;t++)e=e.replace(RegExp("\\{"+(t-1)+"\\}","gm"),arguments[t]);return e},e.extend(i.prototype,{init:function(){var e=this;this.buildNotify(),this.settings.content.icon&&this.setIcon(),"#"!=this.settings.content.url&&this.styleURL(),this.styleDismiss(),this.placement(),this.bind(),this.notify={$ele:this.$ele,update:function(t,i){var n={};"string"==typeof t?n[t]=i:n=t;for(var s in n)switch(s){case"type":this.$ele.removeClass("alert-"+e.settings.type),this.$ele.find('[data-notify="progressbar"] > .progress-bar').removeClass("progress-bar-"+e.settings.type),e.settings.type=n[s],this.$ele.addClass("alert-"+n[s]).find('[data-notify="progressbar"] > .progress-bar').addClass("progress-bar-"+n[s]);break;case"icon":var o=this.$ele.find('[data-notify="icon"]');"class"===e.settings.icon_type.toLowerCase()?o.removeClass(e.settings.content.icon).addClass(n[s]):(o.is("img")||o.find("img"),o.attr("src",n[s])),e.settings.content.icon=n[t];break;case"progress":var a=e.settings.delay-e.settings.delay*(n[s]/100);this.$ele.data("notify-delay",a),this.$ele.find('[data-notify="progressbar"] > div').attr("aria-valuenow",n[s]).css("width",n[s]+"%");break;case"url":this.$ele.find('[data-notify="url"]').attr("href",n[s]);break;case"target":this.$ele.find('[data-notify="url"]').attr("target",n[s]);break;default:this.$ele.find('[data-notify="'+s+'"]').html(n[s])}var l=this.$ele.outerHeight()+parseInt(e.settings.spacing)+parseInt(e.settings.offset.y);e.reposition(l)},close:function(){e.close()}}},buildNotify:function(){var t=this.settings.content;this.$ele=e(String.format(this.settings.template,this.settings.type,t.title,t.message,t.url,t.target)),this.$ele.attr("data-notify-position",this.settings.placement.from+"-"+this.settings.placement.align),this.settings.allow_dismiss||this.$ele.find('[data-notify="dismiss"]').css("display","none"),(this.settings.delay<=0&&!this.settings.showProgressbar||!this.settings.showProgressbar)&&this.$ele.find('[data-notify="progressbar"]').remove()},setIcon:function(){"class"===this.settings.icon_type.toLowerCase()?this.$ele.find('[data-notify="icon"]').addClass(this.settings.content.icon):this.$ele.find('[data-notify="icon"]').is("img")?this.$ele.find('[data-notify="icon"]').attr("src",this.settings.content.icon):this.$ele.find('[data-notify="icon"]').append('<img src="'+this.settings.content.icon+'" alt="Notify Icon" />')},styleDismiss:function(){this.$ele.find('[data-notify="dismiss"]').css({position:"absolute",right:"10px",top:"5px",zIndex:this.settings.z_index+2})},styleURL:function(){this.$ele.find('[data-notify="url"]').css({backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)",height:"100%",left:0,position:"absolute",top:0,width:"100%",zIndex:this.settings.z_index+1})},placement:function(){var t=this,i=this.settings.offset.y,n={display:"inline-block",margin:"0px auto",position:this.settings.position?this.settings.position:"body"===this.settings.element?"fixed":"absolute",transition:"all .5s ease-in-out",zIndex:this.settings.z_index},s=!1,o=this.settings;switch(e('[data-notify-position="'+this.settings.placement.from+"-"+this.settings.placement.align+'"]:not([data-closing="true"])').each(function(){i=Math.max(i,parseInt(e(this).css(o.placement.from))+parseInt(e(this).outerHeight())+parseInt(o.spacing))}),this.settings.newest_on_top===!0&&(i=this.settings.offset.y),n[this.settings.placement.from]=i+"px",this.settings.placement.align){case"left":case"right":n[this.settings.placement.align]=this.settings.offset.x+"px";break;case"center":n.left=0,n.right=0}this.$ele.css(n).addClass(this.settings.animate.enter),e.each(Array("webkit-","moz-","o-","ms-",""),function(e,i){t.$ele[0].style[i+"AnimationIterationCount"]=1}),e(this.settings.element).append(this.$ele),this.settings.newest_on_top===!0&&(i=parseInt(i)+parseInt(this.settings.spacing)+this.$ele.outerHeight(),this.reposition(i)),e.isFunction(t.settings.onShow)&&t.settings.onShow.call(this.$ele),this.$ele.one(this.animations.start,function(){s=!0}).one(this.animations.end,function(){t.$ele.removeClass(t.settings.animate.enter),e.isFunction(t.settings.onShown)&&t.settings.onShown.call(this)}),setTimeout(function(){s||e.isFunction(t.settings.onShown)&&t.settings.onShown.call(this)},600)},bind:function(){var t=this;if(this.$ele.find('[data-notify="dismiss"]').on("click",function(){t.close()}),e.isFunction(t.settings.onClick)&&this.$ele.on("click",function(e){e.target!=t.$ele.find('[data-notify="dismiss"]')[0]&&t.settings.onClick.call(this,e)}),this.$ele.mouseover(function(){e(this).data("data-hover","true")}).mouseout(function(){e(this).data("data-hover","false")}),this.$ele.data("data-hover","false"),this.settings.delay>0){t.$ele.data("notify-delay",t.settings.delay);var i=setInterval(function(){var e=parseInt(t.$ele.data("notify-delay"))-t.settings.timer;if("false"===t.$ele.data("data-hover")&&"pause"===t.settings.mouse_over||"pause"!=t.settings.mouse_over){var n=(t.settings.delay-e)/t.settings.delay*100;t.$ele.data("notify-delay",e),t.$ele.find('[data-notify="progressbar"] > div').attr("aria-valuenow",n).css("width",n+"%")}e<=-t.settings.timer&&(clearInterval(i),t.close())},t.settings.timer)}},close:function(){var t=this,i=parseInt(this.$ele.css(this.settings.placement.from)),n=!1;this.$ele.attr("data-closing","true").addClass(this.settings.animate.exit),t.reposition(i),e.isFunction(t.settings.onClose)&&t.settings.onClose.call(this.$ele),this.$ele.one(this.animations.start,function(){n=!0}).one(this.animations.end,function(){e(this).remove(),e.isFunction(t.settings.onClosed)&&t.settings.onClosed.call(this)}),setTimeout(function(){n||(t.$ele.remove(),t.settings.onClosed&&t.settings.onClosed(t.$ele))},600)},reposition:function(t){var i=this,n='[data-notify-position="'+this.settings.placement.from+"-"+this.settings.placement.align+'"]:not([data-closing="true"])',s=this.$ele.nextAll(n);this.settings.newest_on_top===!0&&(s=this.$ele.prevAll(n)),s.each(function(){e(this).css(i.settings.placement.from,t),t=parseInt(t)+parseInt(i.settings.spacing)+e(this).outerHeight()})}}),e.notify=function(e,t){var n=new i(this,e,t);return n.notify},e.notifyDefaults=function(t){return n=e.extend(!0,{},n,t)},e.notifyClose=function(t){"undefined"==typeof t||"all"===t?e("[data-notify]").find('[data-notify="dismiss"]').trigger("click"):"success"===t||"info"===t||"warning"===t||"danger"===t?e(".alert-"+t+"[data-notify]").find('[data-notify="dismiss"]').trigger("click"):t?e(t+"[data-notify]").find('[data-notify="dismiss"]').trigger("click"):e('[data-notify-position="'+t+'"]').find('[data-notify="dismiss"]').trigger("click")},e.notifyCloseExcept=function(t){"success"===t||"info"===t||"warning"===t||"danger"===t?e("[data-notify]").not(".alert-"+t).find('[data-notify="dismiss"]').trigger("click"):e("[data-notify]").not(t).find('[data-notify="dismiss"]').trigger("click")}}),!function(e,t){var i=function(i,n){var s,o,a=this;n=n||{},this.$element=e(i),this.options=e.extend(!0,{},e.fn.ajaxSelectPicker.defaults,n),this.LOG_ERROR=1,this.LOG_WARNING=2,this.LOG_INFO=3,this.LOG_DEBUG=4,this.lastRequest=!1,this.previousQuery="",this.query="",this.request=!1;var l=[{from:"ajaxResultsPreHook",to:"preprocessData"},{from:"ajaxSearchUrl",to:{ajax:{url:"{{{value}}}"}}},{from:"ajaxOptions",to:"ajax"},{from:"debug",to:function(t){var i={};i.log=Boolean(a.options[t.from])?a.LOG_DEBUG:0,a.options=e.extend(!0,{},a.options,i),delete a.options[t.from],a.log(a.LOG_WARNING,'Deprecated option "'+t.from+'". Update code to use:',i)}},{from:"mixWithCurrents",to:"preserveSelected"},{from:"placeHolderOption",to:{locale:{emptyTitle:"{{{value}}}"}}}];l.length&&e.map(l,function(t){if(a.options[t.from])if(e.isPlainObject(t.to))a.replaceValue(t.to,"{{{value}}}",a.options[t.from]),a.options=e.extend(!0,{},a.options,t.to),a.log(a.LOG_WARNING,'Deprecated option "'+t.from+'". Update code to use:',t.to),delete a.options[t.from];else if(e.isFunction(t.to))t.to.apply(a,[t]);else{var i={};i[t.to]=a.options[t.from],a.options=e.extend(!0,{},a.options,i),a.log(a.LOG_WARNING,'Deprecated option "'+t.from+'". Update code to use:',i),delete a.options[t.from]}});var r=this.$element.data();r.searchUrl&&(a.log(a.LOG_WARNING,'Deprecated attribute name: "data-search-url". Update markup to use: \' data-abs-ajax-url="'+r.searchUrl+"\" '"),this.options.ajax.url=r.searchUrl);var d=function(e,t){return t.toLowerCase()},c=function(e,t,i){var n=[].concat(e),s=n.length,o=i||{};if(s){var a=n.shift();o[a]=c(n,t,o[a])}return s?o:t},h=Object.keys(r).filter(/./.test.bind(new RegExp("^abs[A-Z]")));if(h.length){var p={},u=["locale"];for(s=0,o=h.length;s<o;s++){var f=h[s].replace(/^abs([A-Z])/,d).replace(/([A-Z])/g,"-$1").toLowerCase(),g=f.split("-");if(g[0]&&g.length>1&&u.indexOf(g[0])!==-1){for(var m=[g.shift()],b="",v=0;v<g.length;v++)b+=0===v?g[v]:g[v].charAt(0).toUpperCase()+g[v].slice(1);m.push(b),g=m}this.log(this.LOG_DEBUG,'Processing data attribute "data-abs-'+f+'":',r[h[s]]),c(g,r[h[s]],p)}this.options=e.extend(!0,{},this.options,p),this.log(this.LOG_DEBUG,"Merged in the data attribute options: ",p,this.options)}if(this.selectpicker=r.selectpicker,!this.selectpicker)return this.log(this.LOG_ERROR,"Cannot instantiate an AjaxBootstrapSelect instance without selectpicker first being initialized!"),null;if(!this.options.ajax.url)return this.log(this.LOG_ERROR,'Option "ajax.url" must be set! Options:',this.options),null;if(this.locale=e.extend(!0,{},e.fn.ajaxSelectPicker.locale),this.options.langCode=this.options.langCode||t.navigator.userLanguage||t.navigator.language||"en",!this.locale[this.options.langCode]){var y=this.options.langCode;this.options.langCode="cn";var x=y.split("-");for(s=0,o=x.length;s<o;s++){var C=x.join("-");if(C.length&&this.locale[C]){this.options.langCode=C;break}x.pop()}this.log(this.LOG_WARNING,'Unknown langCode option: "'+y+'". Using the following langCode instead: "'+this.options.langCode+'".')}this.locale[this.options.langCode]=e.extend(!0,{},this.locale[this.options.langCode],this.options.locale),this.list=new t.AjaxBootstrapSelectList(this),this.list.refresh(),setTimeout(function(){a.init()},500)};i.prototype.init=function(){function i(e){new t.AjaxBootstrapSelectRequest(s)}var n,s=this;if(this.options.preserveSelected&&this.selectpicker.$menu.off("click",".actions-btn").on("click",".actions-btn",function(t){s.selectpicker.options.liveSearch?s.selectpicker.$searchbox.focus():s.selectpicker.$button.focus(),t.preventDefault(),t.stopPropagation(),e(this).is(".bs-select-all")?(null===s.selectpicker.$lis&&(s.selectpicker.$lis=s.selectpicker.$menu.find("li")),s.$element.find("option:enabled").prop("selected",!0),e(s.selectpicker.$lis).not(".disabled").addClass("selected"),s.selectpicker.render()):(null===s.selectpicker.$lis&&(s.selectpicker.$lis=s.selectpicker.$menu.find("li")),s.$element.find("option:enabled").prop("selected",!1),e(s.selectpicker.$lis).not(".disabled").removeClass("selected"),s.selectpicker.render()),s.selectpicker.$element.change()}),this.selectpicker.$searchbox.attr("placeholder",this.t("searchPlaceholder")).off("input propertychange"),this.selectpicker.$searchbox.on(this.options.bindEvent,function(i){var o=s.selectpicker.$searchbox.val();if(s.log(s.LOG_DEBUG,'Bind event fired: "'+s.options.bindEvent+'", keyCode:',i.keyCode,i),s.options.cache||(s.options.ignoredKeys[13]="enter"),s.options.ignoredKeys[i.keyCode])return void s.log(s.LOG_DEBUG,"Key ignored.");if(clearTimeout(n),o.length||(s.options.clearOnEmpty&&s.list.destroy(),s.options.emptyRequest)){if(s.previousQuery=s.query,s.query=o,s.options.cache&&13!==i.keyCode){var a=s.list.cacheGet(s.query);if(a)return s.list.setStatus(a.length?"":s.locale["zh-CN"].statusNoResults),s.list.replaceOptions(a),void s.log(s.LOG_INFO,"Rebuilt options from cached data.")}n=setTimeout(function(){s.lastRequest&&s.lastRequest.jqXHR&&e.isFunction(s.lastRequest.jqXHR.abort)&&s.lastRequest.jqXHR.abort(),s.request=new t.AjaxBootstrapSelectRequest(s),s.request.jqXHR.always(function(){s.lastRequest=s.request,s.request=!1})},s.options.requestDelay||300)}}),this.options.preLoadAllData){var o=this.options.preLoadAllDataSign;i(o)}},i.prototype.log=function(e,i){if(t.console&&this.options.log){if("number"!=typeof this.options.log)switch("string"==typeof this.options.log&&(this.options.log=this.options.log.toLowerCase()),this.options.log){case!0:case"debug":this.options.log=this.LOG_DEBUG;break;case"info":this.options.log=this.LOG_INFO;break;case"warn":case"warning":this.options.log=this.LOG_WARNING;break;default:case!1:case"error":this.options.log=this.LOG_ERROR}if(e<=this.options.log){var n=[].slice.apply(arguments,[2]);switch(e){case this.LOG_DEBUG:e="debug";break;case this.LOG_INFO:e="info";break;case this.LOG_WARNING:e="warn";break;default:case this.LOG_ERROR:e="error"}var s="["+e.toUpperCase()+"] AjaxBootstrapSelect:";"string"==typeof i?n.unshift(s+" "+i):(n.unshift(i),n.unshift(s)),t.console[e].apply(t.console,n)}}},i.prototype.replaceValue=function(t,i,n,s){var o=this;s=e.extend({recursive:!0,depth:!1,limit:!1},s),e.each(t,function(a,l){return!(s.limit!==!1&&"number"==typeof s.limit&&s.limit<=0)&&void(e.isArray(t[a])||e.isPlainObject(t[a])?(s.recursive&&s.depth===!1||s.recursive&&"number"==typeof s.depth&&s.depth>0)&&o.replaceValue(t[a],i,n,s):l===i&&(s.limit!==!1&&"number"==typeof s.limit&&s.limit--,t[a]=n))})},i.prototype.t=function(e,t){return t=t||this.options.langCode,this.locale[t]&&this.locale[t].hasOwnProperty(e)?this.locale[t][e]:(this.log(this.LOG_WARNING,"Unknown translation key:",e),e)},t.AjaxBootstrapSelect=t.AjaxBootstrapSelect||i;var n=function(t){var i=this;this.$status=e(t.options.templates.status).hide().appendTo(t.selectpicker.$menu);var n=t.t("statusInitialized");n&&n.length&&this.setStatus(n),this.cache={},this.plugin=t,this.selected=[],this.title=null,this.selectedTextFormat=t.selectpicker.options.selectedTextFormat;var s=[];t.$element.find("option").each(function(){var i=e(this),n=i.attr("value");s.push({value:n,text:i.text(),"class":i.attr("class")||"",data:i.data()||{},preserved:t.options.preserveSelected,selected:!!i.attr("selected")})}),this.cacheSet("",s),t.options.preserveSelected&&(i.selected=s,t.$element.on("change.abs.preserveSelected",function(n){var s=t.$element.find(":selected");i.selected=[],t.selectpicker.multiple||(s=s.last()),s.each(function(){var t=e(this),n=t.attr("value");i.selected.push({value:n,text:t.text(),"class":t.attr("class")||"",data:t.data()||{},preserved:!0,selected:!0})}),i.replaceOptions(i.cacheGet(i.plugin.query))}))};n.prototype.build=function(t){var i,n,s=t.length,o=e("<select/>"),a=e("<optgroup/>").attr("label",this.plugin.t("currentlySelected"));for(this.plugin.log(this.plugin.LOG_DEBUG,"Building the select list options from data:",t),n=0;n<s;n++){var l=t[n],r=e("<option/>").appendTo(l.preserved?a:o);if(l.hasOwnProperty("divider"))r.attr("data-divider","true");else{r.val(l.value).text(l.text),l["class"].length&&r.attr("class",l["class"]),l.disabled&&r.attr("disabled",!0),l.selected&&!this.plugin.selectpicker.multiple&&o.find(":selected").prop("selected",!1),l.selected&&r.attr("selected",!0);for(i in l.data)l.data.hasOwnProperty(i)&&r.attr("data-"+i,l.data[i])}}a.find("option").length&&a["before"===this.plugin.options.preserveSelectedPosition?"prependTo":"appendTo"](o);var d=o.html();return this.plugin.log(this.plugin.LOG_DEBUG,d),d},n.prototype.cacheGet=function(e,t){var i=this.cache[e]||t;return this.plugin.log(this.LOG_DEBUG,"Retrieving cache:",e,i),i},n.prototype.cacheSet=function(e,t){this.cache[e]=t,this.plugin.log(this.LOG_DEBUG,"Saving to cache:",e,t)},n.prototype.destroy=function(){this.replaceOptions(),this.plugin.list.setStatus(),this.plugin.log(this.plugin.LOG_DEBUG,"Destroyed select list.")},n.prototype.refresh=function(e){this.plugin.selectpicker.$menu.css("minHeight",0),this.plugin.selectpicker.$menu.find("> .inner").css("minHeight",0);var t=this.plugin.t("emptyTitle");!this.plugin.$element.find("option").length&&t&&t.length?this.setTitle(t):this.title&&this.restoreTitle(),this.plugin.selectpicker.refresh(),this.plugin.selectpicker.findLis(),e&&(this.plugin.log(this.plugin.LOG_DEBUG,"Triggering Change"),this.plugin.$element.trigger("change.$")),this.plugin.log(this.plugin.LOG_DEBUG,"Refreshed select list.")},n.prototype.replaceOptions=function(e){var t,i,n,s="",o=[],a=[],l=[];if(e=e||[],this.selected&&this.selected.length){for(this.plugin.log(this.plugin.LOG_INFO,"Processing preserved selections:",this.selected),a=[].concat(this.selected,e),i=a.length,t=0;t<i;t++)n=a[t],n.hasOwnProperty("value")&&l.indexOf(n.value+"")===-1?(l.push(n.value+""),o.push(n)):this.plugin.log(this.plugin.LOG_DEBUG,"Duplicate item found, ignoring.");e=o}e.length&&(s=this.plugin.list.build(e)),this.plugin.$element.html(s),this.refresh(),this.plugin.log(this.plugin.LOG_DEBUG,"Replaced options with data:",e)},n.prototype.restore=function(){var e=this.plugin.list.cacheGet(this.plugin.previousQuery);return e&&this.plugin.list.replaceOptions(e)&&this.plugin.log(this.plugin.LOG_DEBUG,"Restored select list to the previous query: ",this.plugin.previousQuery),this.plugin.log(this.plugin.LOG_DEBUG,"Unable to restore select list to the previous query:",this.plugin.previousQuery),!1},n.prototype.restoreTitle=function(){this.plugin.request||(this.plugin.selectpicker.options.selectedTextFormat=this.selectedTextFormat,this.title?this.plugin.$element.attr("title",this.title):this.plugin.$element.removeAttr("title"),this.title=null)},n.prototype.setTitle=function(e){this.plugin.request||(this.title=this.plugin.$element.attr("title"),this.plugin.selectpicker.options.selectedTextFormat="static",this.plugin.$element.attr("title",e))},n.prototype.setStatus=function(e){e=e||"",e.length?this.$status.html(e).show():this.$status.html("").hide()},t.AjaxBootstrapSelectList=t.AjaxBootstrapSelectList||n;var s=function(t){var i,n=this,s=function(e){return function(){n.plugin.log(n.plugin.LOG_INFO,"Invoking AjaxBootstrapSelectRequest."+e+" callback:",arguments),n[e].apply(n,arguments),n.callbacks[e]&&(n.plugin.log(n.plugin.LOG_INFO,"Invoking ajax."+e+" callback:",arguments),n.callbacks[e].apply(n,arguments))}},o=["beforeSend","success","error","complete"],a=o.length;for(this.plugin=t,this.options=e.extend(!0,{},t.options.ajax),this.callbacks={},i=0;i<a;i++){var l=o[i];this.options[l]&&e.isFunction(this.options[l])&&(this.callbacks[l]=this.options[l]),this.options[l]=s(l)}this.options.data&&e.isFunction(this.options.data)&&(this.options.data=this.options.data.apply(this)||{q:"{{{q}}}"}),this.plugin.replaceValue(this.options.data,"{{{q}}}",this.plugin.query),this.jqXHR=e.ajax(this.options)};s.prototype.beforeSend=function(e){this.plugin.list.destroy(),this.plugin.list.setStatus(this.plugin.t("statusSearching"))},s.prototype.complete=function(e,t){if("abort"!==t){var i=this.plugin.list.cacheGet(this.plugin.query);if(i){if(!i.length)return this.plugin.list.destroy(),this.plugin.list.setStatus(this.plugin.locale["zh-CN"].statusNoResults),void this.plugin.log(this.plugin.LOG_INFO,"No results were returned.");this.plugin.list.setStatus()}this.plugin.list.refresh(!0)}},s.prototype.error=function(e,t,i){"abort"!==t&&(this.plugin.list.cacheSet(this.plugin.query),this.plugin.options.clearOnError&&this.plugin.list.destroy(),this.plugin.list.setStatus(this.plugin.t("errorText")),this.plugin.options.restoreOnError&&(this.plugin.list.restore(),this.plugin.list.setStatus()))},s.prototype.process=function(t){var i,n,s,o,a,l,r=[],d=[];if(this.plugin.log(this.plugin.LOG_INFO,"Processing raw data for:",this.plugin.query,t),a=t,e.isFunction(this.plugin.options.preprocessData)&&(this.plugin.log(this.plugin.LOG_DEBUG,"Invoking preprocessData callback:",this.plugin.options.processData),s=this.plugin.options.preprocessData.apply(this,[a]),"undefined"!=typeof s&&null!==s&&s!==!1&&(a=s)),!e.isArray(a))return this.plugin.log(this.plugin.LOG_ERROR,'The data returned is not an Array. Use the "preprocessData" callback option to parse the results and construct a proper array for this plugin.',a),!1;for(n=a.length,i=0;i<n;i++)o=a[i],this.plugin.log(this.plugin.LOG_DEBUG,"Processing item:",o),e.isPlainObject(o)&&(o.hasOwnProperty("divider")||o.hasOwnProperty("data")&&e.isPlainObject(o.data)&&o.data.divider?(this.plugin.log(this.plugin.LOG_DEBUG,"Item is a divider, ignoring provided data."),r.push({divider:!0})):o.hasOwnProperty("value")?d.indexOf(o.value+"")===-1?(d.push(o.value+""),o=e.extend({text:o.value,"class":"",data:{},disabled:!1,selected:!1},o),r.push(o)):this.plugin.log(this.plugin.LOG_DEBUG,"Duplicate item found, ignoring."):this.plugin.log(this.plugin.LOG_DEBUG,'Data item must have a "value" property, skipping.'));if(l=[].concat(r),e.isFunction(this.plugin.options.processData)&&(this.plugin.log(this.plugin.LOG_DEBUG,"Invoking processData callback:",this.plugin.options.processData),s=this.plugin.options.processData.apply(this,[l]),"undefined"!=typeof s&&null!==s&&s!==!1)){if(!e.isArray(s))return this.plugin.log(this.plugin.LOG_ERROR,"The processData callback did not return an array.",s),!1;l=s}return this.plugin.list.cacheSet(this.plugin.query,l),this.plugin.log(this.plugin.LOG_INFO,"Processed data:",l),l},s.prototype.success=function(t,i,n){if(!e.isArray(t)&&!e.isPlainObject(t))return this.plugin.log(this.plugin.LOG_ERROR,"Request did not return a JSON Array or Object.",t),void this.plugin.list.destroy();var s=this.process(t);this.plugin.list.replaceOptions(s)},t.AjaxBootstrapSelectRequest=t.AjaxBootstrapSelectRequest||s,e.fn.ajaxSelectPicker=function(i){return this.each(function(){e(this).data("AjaxBootstrapSelect")||e(this).data("AjaxBootstrapSelect",new t.AjaxBootstrapSelect(this,i))})},e.fn.ajaxSelectPicker.locale={},e.fn.ajaxSelectPicker.defaults={ajax:{url:null,type:"POST",dataType:"json",data:{q:"{{{q}}}"}},bindEvent:"keyup",cache:!0,clearOnEmpty:!0,clearOnError:!0,emptyRequest:!1,ignoredKeys:{9:"tab",16:"shift",17:"ctrl",18:"alt",27:"esc",37:"left",39:"right",38:"up",40:"down",91:"meta"},langCode:null,locale:null,log:"error",preprocessData:function(){},preserveSelected:!0,preserveSelectedPosition:"after",processData:function(){},requestDelay:300,restoreOnError:!1,templates:{status:'<div class="status"></div>'},preLoadAllData:!1,preLoadAllDataSign:""},e.fn.ajaxSelectPicker.locale["en-US"]={currentlySelected:"Currently Selected",emptyTitle:"Select and begin typing",errorText:"Unable to retrieve results",searchPlaceholder:"Search...",statusInitialized:"Start typing a search query",statusNoResults:"No Results",statusSearching:"Searching..."},e.fn.ajaxSelectPicker.locale.en=e.fn.ajaxSelectPicker.locale["en-US"],e.fn.ajaxSelectPicker.locale["zh-CN"]={currentlySelected:"当前选中",emptyTitle:"请选择",errorText:"无法获取结果",searchPlaceholder:"查询...",statusInitialized:"请输入字符查询",statusNoResults:"没有结果",statusSearching:"查询中..."},e.fn.ajaxSelectPicker.locale.cn=e.fn.ajaxSelectPicker.locale["zh-CN"]}(jQuery,window),function(e,t){"function"==typeof define&&define.amd?define(["jquery"],function(e){return t(e)}):"object"==typeof exports?module.exports=t(require("jquery")):t(jQuery)}(this,function(e){!function(e){"use strict";function t(t){var i=[{re:/[\xC0-\xC6]/g,ch:"A"},{re:/[\xE0-\xE6]/g,ch:"a"},{re:/[\xC8-\xCB]/g,ch:"E"},{re:/[\xE8-\xEB]/g,ch:"e"},{re:/[\xCC-\xCF]/g,ch:"I"},{re:/[\xEC-\xEF]/g,ch:"i"},{re:/[\xD2-\xD6]/g,ch:"O"},{re:/[\xF2-\xF6]/g,ch:"o"},{re:/[\xD9-\xDC]/g,ch:"U"},{re:/[\xF9-\xFC]/g,ch:"u"},{re:/[\xC7-\xE7]/g,ch:"c"},{re:/[\xD1]/g,ch:"N"},{re:/[\xF1]/g,ch:"n"}];return e.each(i,function(){t=t.replace(this.re,this.ch)}),t}function i(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},i="(?:"+Object.keys(t).join("|")+")",n=new RegExp(i),s=new RegExp(i,"g"),o=null==e?"":""+e;return n.test(o)?o.replace(s,function(e){return t[e]}):o}function n(t,i){var n=arguments,o=t,a=i;[].shift.apply(n);var l,r=this.each(function(){var t=e(this);if(t.is("select")){var i=t.data("selectpicker"),r="object"==typeof o&&o;if(i){if(r)for(var d in r)r.hasOwnProperty(d)&&(i.options[d]=r[d])}else{var c=e.extend({},s.DEFAULTS,e.fn.selectpicker.defaults||{},t.data(),r);c.template=e.extend({},s.DEFAULTS.template,e.fn.selectpicker.defaults?e.fn.selectpicker.defaults.template:{},t.data().template,r.template),t.data("selectpicker",i=new s(this,c,a))}"string"==typeof o&&(l=i[o]instanceof Function?i[o].apply(i,n):i.options[o])}});return"undefined"!=typeof l?l:r}String.prototype.includes||!function(){var e={}.toString,t=function(){try{var e={},t=Object.defineProperty,i=t(e,e,e)&&t}catch(n){}return i}(),i="".indexOf,n=function(t){if(null==this)throw new TypeError;var n=String(this);if(t&&"[object RegExp]"==e.call(t))throw new TypeError;var s=n.length,o=String(t),a=o.length,l=arguments.length>1?arguments[1]:void 0,r=l?Number(l):0;r!=r&&(r=0);var d=Math.min(Math.max(r,0),s);return!(a+d>s)&&i.call(n,o,r)!=-1};t?t(String.prototype,"includes",{value:n,configurable:!0,writable:!0}):String.prototype.includes=n}(),String.prototype.startsWith||!function(){var e=function(){try{var e={},t=Object.defineProperty,i=t(e,e,e)&&t}catch(n){}return i}(),t={}.toString,i=function(e){if(null==this)throw new TypeError;var i=String(this);if(e&&"[object RegExp]"==t.call(e))throw new TypeError;var n=i.length,s=String(e),o=s.length,a=arguments.length>1?arguments[1]:void 0,l=a?Number(a):0;l!=l&&(l=0);var r=Math.min(Math.max(l,0),n);if(o+r>n)return!1;for(var d=-1;++d<o;)if(i.charCodeAt(r+d)!=s.charCodeAt(d))return!1;return!0};e?e(String.prototype,"startsWith",{value:i,configurable:!0,writable:!0}):String.prototype.startsWith=i}(),Object.keys||(Object.keys=function(e,t,i){i=[];for(t in e)i.hasOwnProperty.call(e,t)&&i.push(t);return i}),e.fn.triggerNative=function(e){var t,i=this[0];i.dispatchEvent?("function"==typeof Event?t=new Event(e,{bubbles:!0}):(t=document.createEvent("Event"),t.initEvent(e,!0,!1)),i.dispatchEvent(t)):(i.fireEvent&&(t=document.createEventObject(),t.eventType=e,i.fireEvent("on"+e,t)),this.trigger(e))},e.expr[":"].icontains=function(t,i,n){var s=e(t),o=(s.data("tokens")||s.text()).toString().toUpperCase();return o.includes(n[3].toUpperCase())},e.expr[":"].ibegins=function(t,i,n){var s=e(t),o=(s.data("tokens")||s.text()).toString().toUpperCase();return o.startsWith(n[3].toUpperCase())},e.expr[":"].aicontains=function(t,i,n){var s=e(t),o=(s.data("tokens")||s.data("normalizedText")||s.text()).toString().toUpperCase();return o.includes(n[3].toUpperCase())},e.expr[":"].aibegins=function(t,i,n){var s=e(t),o=(s.data("tokens")||s.data("normalizedText")||s.text()).toString().toUpperCase();return o.startsWith(n[3].toUpperCase())};var s=function(t,i,n){n&&(n.stopPropagation(),n.preventDefault()),this.$element=e(t),this.$newElement=null,this.$button=null,this.$menu=null,this.$lis=null,this.options=i,null===this.options.title&&(this.options.title=this.$element.attr("title")),this.val=s.prototype.val,this.render=s.prototype.render,this.refresh=s.prototype.refresh,this.setStyle=s.prototype.setStyle,this.selectAll=s.prototype.selectAll,this.deselectAll=s.prototype.deselectAll,this.destroy=s.prototype.destroy,this.remove=s.prototype.remove,this.show=s.prototype.show,this.hide=s.prototype.hide,this.init()};s.VERSION="1.10.0",s.DEFAULTS={noneSelectedText:"请选择",noneResultsText:"没有查询到 {0}",countSelectedText:function(e,t){return"{0} 项选中"},maxOptionsText:function(e,t){return[1==e?"Limit reached ({n} item max)":"Limit reached ({n} items max)",1==t?"Group limit reached ({n} item max)":"Group limit reached ({n} items max)"]},selectAllText:"全选",deselectAllText:"取消全选",doneButton:!1,doneButtonText:"关闭",multipleSeparator:", ",styleBase:"btn",style:"btn-default",size:"auto",title:null,selectedTextFormat:"values",width:!1,container:!1,hideDisabled:!1,showSubtext:!1,showIcon:!0,showContent:!0,dropupAuto:!0,header:!1,liveSearch:!1,liveSearchPlaceholder:null,liveSearchNormalize:!1,liveSearchStyle:"contains",actionsBox:!1,iconBase:"glyphicon",tickIcon:"glyphicon-ok",showTick:!1,template:{caret:'<span class="caret"></span>'},maxOptions:!1,mobile:!1,selectOnTab:!1,dropdownAlignRight:!1},s.prototype={constructor:s,init:function(){var t=this,i=this.$element.attr("id");this.$element.addClass("bs-select-hidden"),this.liObj={},this.multiple=this.$element.prop("multiple"),this.autofocus=this.$element.prop("autofocus"),this.$newElement=this.createView(),this.$element.after(this.$newElement).appendTo(this.$newElement),this.$button=this.$newElement.children("button"),this.$menu=this.$newElement.children(".dropdown-menu"),this.$menuInner=this.$menu.children(".inner"),this.$searchbox=this.$menu.find("input"),this.$element.removeClass("bs-select-hidden"),this.options.dropdownAlignRight===!0&&this.$menu.addClass("dropdown-menu-right"),"undefined"!=typeof i&&(this.$button.attr("data-id",i),e('label[for="'+i+'"]').click(function(e){e.preventDefault(),t.$button.focus()})),this.checkDisabled(),this.clickListener(),this.options.liveSearch&&this.liveSearchListener(),this.render(),this.setStyle(),this.setWidth(),this.options.container&&this.selectPosition(),this.$menu.data("this",this),this.$newElement.data("this",this),this.options.mobile&&this.mobile(),this.$newElement.on({"hide.bs.dropdown":function(e){t.$element.trigger("hide.bs.select",e)},"hidden.bs.dropdown":function(e){t.$element.trigger("hidden.bs.select",e)},"show.bs.dropdown":function(e){t.$element.trigger("show.bs.select",e)},"shown.bs.dropdown":function(e){t.$element.trigger("shown.bs.select",e)}}),t.$element[0].hasAttribute("required")&&this.$element.on("invalid",function(){t.$button.addClass("bs-invalid").focus(),t.$element.on({"focus.bs.select":function(){t.$button.focus(),t.$element.off("focus.bs.select")},"shown.bs.select":function(){t.$element.val(t.$element.val()).off("shown.bs.select")},"rendered.bs.select":function(){this.validity.valid&&t.$button.removeClass("bs-invalid"),t.$element.off("rendered.bs.select")}})}),setTimeout(function(){t.$element.trigger("loaded.bs.select")})},createDropdown:function(){var t=this.multiple||this.options.showTick?" show-tick":"",n=this.$element.parent().hasClass("input-group")?" input-group-btn":"",s=this.autofocus?" autofocus":"",o=this.options.header?'<div class="popover-title"><button type="button" class="close" aria-hidden="true">&times;</button>'+this.options.header+"</div>":"",a=this.options.liveSearch?'<div class="bs-searchbox"><input type="text" class="form-control" autocomplete="off"'+(null===this.options.liveSearchPlaceholder?"":' placeholder="'+i(this.options.liveSearchPlaceholder)+'"')+"></div>":"",l=this.multiple&&this.options.actionsBox?'<div class="bs-actionsbox"><div class="btn-group btn-group-sm btn-block"><button type="button" class="actions-btn bs-select-all btn btn-default">'+this.options.selectAllText+'</button><button type="button" class="actions-btn bs-deselect-all btn btn-default">'+this.options.deselectAllText+"</button></div></div>":"",r=this.multiple&&this.options.doneButton?'<div class="bs-donebutton"><div class="btn-group btn-block"><button type="button" class="btn btn-sm btn-default">'+this.options.doneButtonText+"</button></div></div>":"",d='<div class="btn-group bootstrap-select'+t+n+'"><button type="button" class="'+this.options.styleBase+' dropdown-toggle" data-toggle="dropdown"'+s+'><span class="filter-option pull-left"></span>&nbsp;<span class="bs-caret">'+this.options.template.caret+'</span></button><div class="dropdown-menu open">'+o+a+l+'<ul class="dropdown-menu inner" role="menu"></ul>'+r+"</div></div>";return e(d)},createView:function(){var e=this.createDropdown(),t=this.createLi();return e.find("ul")[0].innerHTML=t,e},reloadLi:function(){this.destroyLi();var e=this.createLi();this.$menuInner[0].innerHTML=e},destroyLi:function(){this.$menu.find("li").remove()},createLi:function(){var n=this,s=[],o=0,a=document.createElement("option"),l=-1,r=function(e,t,i,n){return"<li"+("undefined"!=typeof i&""!==i?' class="'+i+'"':"")+("undefined"!=typeof t&null!==t?' data-original-index="'+t+'"':"")+("undefined"!=typeof n&null!==n?'data-optgroup="'+n+'"':"")+">"+e+"</li>";
},d=function(e,s,o,a){return'<a tabindex="0"'+("undefined"!=typeof s?' class="'+s+'"':"")+("undefined"!=typeof o?' style="'+o+'"':"")+(n.options.liveSearchNormalize?' data-normalized-text="'+t(i(e))+'"':"")+("undefined"!=typeof a||null!==a?' data-tokens="'+a+'"':"")+">"+e+'<span class="'+n.options.iconBase+" "+n.options.tickIcon+' check-mark"></span></a>'};if(this.options.title&&!this.multiple&&(l--,!this.$element.find(".bs-title-option").length)){var c=this.$element[0];a.className="bs-title-option",a.appendChild(document.createTextNode(this.options.title)),a.value="",c.insertBefore(a,c.firstChild);var h=e(c.options[c.selectedIndex]);void 0===h.attr("selected")&&h.prop("selected")===!1&&(a.selected=!0)}return this.$element.find("option").each(function(t){var i=e(this);if(l++,!i.hasClass("bs-title-option")){var a=this.className||"",c=this.style.cssText,h=i.data("content")?i.data("content"):i.html(),p=i.data("tokens")?i.data("tokens"):null,u="undefined"!=typeof i.data("subtext")?'<small class="text-muted">'+i.data("subtext")+"</small>":"",f="undefined"!=typeof i.data("icon")?'<span class="'+n.options.iconBase+" "+i.data("icon")+'"></span> ':"",g=i.parent(),m="OPTGROUP"===g[0].tagName,b=m&&g[0].disabled,v=this.disabled||b;if(""!==f&&v&&(f="<span>"+f+"</span>"),n.options.hideDisabled&&(v&&!m||b))return void l--;if(i.data("content")||(h=f+'<span class="text">'+h+u+"</span>"),m&&i.data("divider")!==!0){if(n.options.hideDisabled&&v){if(void 0===g.data("allOptionsDisabled")){var y=g.children();g.data("allOptionsDisabled",y.filter(":disabled").length===y.length)}if(g.data("allOptionsDisabled"))return void l--}var x=" "+g[0].className||"";if(0===i.index()){o+=1;var C=g[0].label,w="undefined"!=typeof g.data("subtext")?'<small class="text-muted">'+g.data("subtext")+"</small>":"",$=g.data("icon")?'<span class="'+n.options.iconBase+" "+g.data("icon")+'"></span> ':"";C=$+'<span class="text">'+C+w+"</span>",0!==t&&s.length>0&&(l++,s.push(r("",null,"divider",o+"div"))),l++,s.push(r(C,null,"dropdown-header"+x,o))}if(n.options.hideDisabled&&v)return void l--;s.push(r(d(h,"opt "+a+x,c,p),t,"",o))}else if(i.data("divider")===!0)s.push(r("",t,"divider"));else if(i.data("hidden")===!0)s.push(r(d(h,a,c,p),t,"hidden is-hidden"));else{var k=this.previousElementSibling&&"OPTGROUP"===this.previousElementSibling.tagName;if(!k&&n.options.hideDisabled)for(var S=e(this).prevAll(),O=0;O<S.length;O++)if("OPTGROUP"===S[O].tagName){for(var N=0,E=0;E<O;E++){var I=S[E];(I.disabled||e(I).data("hidden")===!0)&&N++}N===O&&(k=!0);break}k&&(l++,s.push(r("",null,"divider",o+"div"))),s.push(r(d(h,a,c,p),t))}n.liObj[t]=l}}),this.multiple||0!==this.$element.find("option:selected").length||this.options.title||this.$element.find("option").eq(0).prop("selected",!0).attr("selected","selected"),s.join("")},findLis:function(){return null==this.$lis&&(this.$lis=this.$menu.find("li")),this.$lis},render:function(t){var i,n=this;t!==!1&&(this.$element.find("option").each(function(e){var t=n.findLis().eq(n.liObj[e]);n.setDisabled(e,this.disabled||"OPTGROUP"===this.parentNode.tagName&&this.parentNode.disabled,t),n.setSelected(e,this.selected,t)}),this.togglePlaceholder()),this.tabIndex();var s=this.$element.find("option").map(function(){if(this.selected){if(n.options.hideDisabled&&(this.disabled||"OPTGROUP"===this.parentNode.tagName&&this.parentNode.disabled))return;var t,i=e(this),s=i.data("icon")&&n.options.showIcon?'<i class="'+n.options.iconBase+" "+i.data("icon")+'"></i> ':"";return t=n.options.showSubtext&&i.data("subtext")&&!n.multiple?' <small class="text-muted">'+i.data("subtext")+"</small>":"","undefined"!=typeof i.attr("title")?i.attr("title"):i.data("content")&&n.options.showContent?i.data("content"):s+i.html()+t}}).toArray(),o=this.multiple?s.join(this.options.multipleSeparator):s[0];if(this.multiple&&this.options.selectedTextFormat.indexOf("count")>-1){var a=this.options.selectedTextFormat.split(">");if(a.length>1&&s.length>a[1]||1==a.length&&s.length>=2){i=this.options.hideDisabled?", [disabled]":"";var l=this.$element.find("option").not('[data-divider="true"], [data-hidden="true"]'+i).length,r="function"==typeof this.options.countSelectedText?this.options.countSelectedText(s.length,l):this.options.countSelectedText;o=r.replace("{0}",s.length.toString()).replace("{1}",l.toString())}}void 0==this.options.title&&(this.options.title=this.$element.attr("title")),"static"==this.options.selectedTextFormat&&(o=this.options.title),o||(o="undefined"!=typeof this.options.title?this.options.title:this.options.noneSelectedText),this.$button.attr("title",e.trim(o.replace(/<[^>]*>?/g,""))),this.$button.children(".filter-option").html(o),this.$element.trigger("rendered.bs.select")},setStyle:function(e,t){this.$element.attr("class")&&this.$newElement.addClass(this.$element.attr("class").replace(/selectpicker|mobile-device|bs-select-hidden|validate\[.*\]/gi,""));var i=e?e:this.options.style;"add"==t?this.$button.addClass(i):"remove"==t?this.$button.removeClass(i):(this.$button.removeClass(this.options.style),this.$button.addClass(i))},liHeight:function(t){if(t||this.options.size!==!1&&!this.sizeInfo){var i=document.createElement("div"),n=document.createElement("div"),s=document.createElement("ul"),o=document.createElement("li"),a=document.createElement("li"),l=document.createElement("a"),r=document.createElement("span"),d=this.options.header&&this.$menu.find(".popover-title").length>0?this.$menu.find(".popover-title")[0].cloneNode(!0):null,c=this.options.liveSearch?document.createElement("div"):null,h=this.options.actionsBox&&this.multiple&&this.$menu.find(".bs-actionsbox").length>0?this.$menu.find(".bs-actionsbox")[0].cloneNode(!0):null,p=this.options.doneButton&&this.multiple&&this.$menu.find(".bs-donebutton").length>0?this.$menu.find(".bs-donebutton")[0].cloneNode(!0):null;if(r.className="text",i.className=this.$menu[0].parentNode.className+" open",n.className="dropdown-menu open",s.className="dropdown-menu inner",o.className="divider",r.appendChild(document.createTextNode("Inner text")),l.appendChild(r),a.appendChild(l),s.appendChild(a),s.appendChild(o),d&&n.appendChild(d),c){var u=document.createElement("span");c.className="bs-searchbox",u.className="form-control",c.appendChild(u),n.appendChild(c)}h&&n.appendChild(h),n.appendChild(s),p&&n.appendChild(p),i.appendChild(n),document.body.appendChild(i);var f=l.offsetHeight,g=d?d.offsetHeight:0,m=c?c.offsetHeight:0,b=h?h.offsetHeight:0,v=p?p.offsetHeight:0,y=e(o).outerHeight(!0),x="function"==typeof getComputedStyle&&getComputedStyle(n),C=x?null:e(n),w={vert:parseInt(x?x.paddingTop:C.css("paddingTop"))+parseInt(x?x.paddingBottom:C.css("paddingBottom"))+parseInt(x?x.borderTopWidth:C.css("borderTopWidth"))+parseInt(x?x.borderBottomWidth:C.css("borderBottomWidth")),horiz:parseInt(x?x.paddingLeft:C.css("paddingLeft"))+parseInt(x?x.paddingRight:C.css("paddingRight"))+parseInt(x?x.borderLeftWidth:C.css("borderLeftWidth"))+parseInt(x?x.borderRightWidth:C.css("borderRightWidth"))},$={vert:w.vert+parseInt(x?x.marginTop:C.css("marginTop"))+parseInt(x?x.marginBottom:C.css("marginBottom"))+2,horiz:w.horiz+parseInt(x?x.marginLeft:C.css("marginLeft"))+parseInt(x?x.marginRight:C.css("marginRight"))+2};document.body.removeChild(i),this.sizeInfo={liHeight:f,headerHeight:g,searchHeight:m,actionsHeight:b,doneButtonHeight:v,dividerHeight:y,menuPadding:w,menuExtras:$}}},setSize:function(){if(this.findLis(),this.liHeight(),this.options.header&&this.$menu.css("padding-top",0),this.options.size!==!1){var t,i,n,s,o,a,l,r,d=this,c=this.$menu,h=this.$menuInner,p=e(window),u=this.$newElement[0].offsetHeight,f=this.$newElement[0].offsetWidth,g=this.sizeInfo.liHeight,m=this.sizeInfo.headerHeight,b=this.sizeInfo.searchHeight,v=this.sizeInfo.actionsHeight,y=this.sizeInfo.doneButtonHeight,x=this.sizeInfo.dividerHeight,C=this.sizeInfo.menuPadding,w=this.sizeInfo.menuExtras,$=this.options.hideDisabled?".disabled":"",k=function(){var e=d.$newElement.offset();o=e.top-p.scrollTop(),a=p.height()-o-u,l=e.left-p.scrollLeft(),r=p.width()-l-f};if(k(),"auto"===this.options.size){var S=function(){var p,u=function(t,i){return function(n){return i?n.classList?n.classList.contains(t):e(n).hasClass(t):!(n.classList?n.classList.contains(t):e(n).hasClass(t))}},x=d.$menuInner[0].getElementsByTagName("li"),$=Array.prototype.filter?Array.prototype.filter.call(x,u("hidden",!1)):d.$lis.not(".hidden"),S=Array.prototype.filter?Array.prototype.filter.call($,u("dropdown-header",!0)):$.filter(".dropdown-header");k(),t=a-w.vert,i=r-w.horiz,d.options.container?(c.data("height")||c.data("height",c.height()),n=c.data("height"),c.data("width")||c.data("width",c.width()),s=c.data("width")):(n=c.height(),s=c.width()),d.options.dropupAuto&&d.$newElement.toggleClass("dropup",o>a&&t-w.vert<n),d.$newElement.hasClass("dropup")&&(t=o-w.vert),"auto"===d.options.dropdownAlignRight&&c.toggleClass("dropdown-menu-right",l>r&&i-w.horiz<s-f),p=$.length+S.length>3?3*g+w.vert-2:0,c.css({"max-height":t+"px",overflow:"hidden","min-height":p+m+b+v+y+"px"}),h.css({"max-height":t-m-b-v-y-C.vert+"px","overflow-y":"auto","min-height":Math.max(p-C.vert,0)+"px"})};S(),this.$searchbox.off("input.getSize propertychange.getSize").on("input.getSize propertychange.getSize",S),p.off("resize.getSize scroll.getSize").on("resize.getSize scroll.getSize",S)}else if(this.options.size&&"auto"!=this.options.size&&this.$lis.not($).length>this.options.size){var O=this.$lis.not(".divider").not($).children().slice(0,this.options.size).last().parent().index(),N=this.$lis.slice(0,O+1).filter(".divider").length;t=g*this.options.size+N*x+C.vert,d.options.container?(c.data("height")||c.data("height",c.height()),n=c.data("height")):n=c.height(),d.options.dropupAuto&&this.$newElement.toggleClass("dropup",o>a&&t-w.vert<n),c.css({"max-height":t+m+b+v+y+"px",overflow:"hidden","min-height":""}),h.css({"max-height":t-C.vert+"px","overflow-y":"auto","min-height":""})}}},setWidth:function(){if("auto"===this.options.width){this.$menu.css("min-width","0");var e=this.$menu.parent().clone().appendTo("body"),t=this.options.container?this.$newElement.clone().appendTo("body"):e,i=e.children(".dropdown-menu").outerWidth(),n=t.css("width","auto").children("button").outerWidth();e.remove(),t.remove(),this.$newElement.css("width",Math.max(i,n)+"px")}else"fit"===this.options.width?(this.$menu.css("min-width",""),this.$newElement.css("width","").addClass("fit-width")):this.options.width?(this.$menu.css("min-width",""),this.$newElement.css("width",this.options.width)):(this.$menu.css("min-width",""),this.$newElement.css("width",""));this.$newElement.hasClass("fit-width")&&"fit"!==this.options.width&&this.$newElement.removeClass("fit-width")},selectPosition:function(){this.$bsContainer=e('<div class="bs-container" />');var t,i,n=this,s=function(e){n.$bsContainer.addClass(e.attr("class").replace(/form-control|fit-width/gi,"")).toggleClass("dropup",e.hasClass("dropup")),t=e.offset(),i=e.hasClass("dropup")?0:e[0].offsetHeight,n.$bsContainer.css({top:t.top+i,left:t.left,width:e[0].offsetWidth})};this.$button.on("click",function(){var t=e(this);n.isDisabled()||(s(n.$newElement),n.$bsContainer.appendTo(n.options.container).toggleClass("open",!t.hasClass("open")).append(n.$menu))}),e(window).on("resize scroll",function(){s(n.$newElement)}),this.$element.on("hide.bs.select",function(){n.$menu.data("height",n.$menu.height()),n.$bsContainer.detach()})},setSelected:function(e,t,i){i||(this.togglePlaceholder(),i=this.findLis().eq(this.liObj[e])),i.toggleClass("selected",t)},setDisabled:function(e,t,i){i||(i=this.findLis().eq(this.liObj[e])),t?i.addClass("disabled").children("a").attr("href","#").attr("tabindex",-1):i.removeClass("disabled").children("a").removeAttr("href").attr("tabindex",0)},isDisabled:function(){return this.$element[0].disabled},checkDisabled:function(){var e=this;this.isDisabled()?(this.$newElement.addClass("disabled"),this.$button.addClass("disabled").attr("tabindex",-1)):(this.$button.hasClass("disabled")&&(this.$newElement.removeClass("disabled"),this.$button.removeClass("disabled")),this.$button.attr("tabindex")!=-1||this.$element.data("tabindex")||this.$button.removeAttr("tabindex")),this.$button.click(function(){return!e.isDisabled()})},togglePlaceholder:function(){var e=this.$element.val();this.$button.toggleClass("bs-placeholder",null===e||""===e)},tabIndex:function(){this.$element.data("tabindex")!==this.$element.attr("tabindex")&&this.$element.attr("tabindex")!==-98&&"-98"!==this.$element.attr("tabindex")&&(this.$element.data("tabindex",this.$element.attr("tabindex")),this.$button.attr("tabindex",this.$element.data("tabindex"))),this.$element.attr("tabindex",-98)},clickListener:function(){var t=this,i=e(document);this.$newElement.on("touchstart.dropdown",".dropdown-menu",function(e){e.stopPropagation()}),i.data("spaceSelect",!1),this.$button.on("keyup",function(e){/(32)/.test(e.keyCode.toString(10))&&i.data("spaceSelect")&&(e.preventDefault(),i.data("spaceSelect",!1))}),this.$button.on("click",function(){t.setSize()}),this.$element.on("shown.bs.select",function(){if(t.options.liveSearch||t.multiple){if(!t.multiple){var e=t.liObj[t.$element[0].selectedIndex];if("number"!=typeof e||t.options.size===!1)return;var i=t.$lis.eq(e)[0].offsetTop-t.$menuInner[0].offsetTop;i=i-t.$menuInner[0].offsetHeight/2+t.sizeInfo.liHeight/2,t.$menuInner[0].scrollTop=i}}else t.$menuInner.find(".selected a").focus()}),this.$menuInner.on("click","li a",function(i){var n=e(this),s=n.parent().data("originalIndex"),o=t.$element.val(),a=t.$element.prop("selectedIndex"),l=!0;if(t.multiple&&1!==t.options.maxOptions&&i.stopPropagation(),i.preventDefault(),!t.isDisabled()&&!n.parent().hasClass("disabled")){var r=t.$element.find("option"),d=r.eq(s),c=d.prop("selected"),h=d.parent("optgroup"),p=t.options.maxOptions,u=h.data("maxOptions")||!1;if(t.multiple){if(d.prop("selected",!c),t.setSelected(s,!c),n.blur(),p!==!1||u!==!1){var f=p<r.filter(":selected").length,g=u<h.find("option:selected").length;if(p&&f||u&&g)if(p&&1==p)r.prop("selected",!1),d.prop("selected",!0),t.$menuInner.find(".selected").removeClass("selected"),t.setSelected(s,!0);else if(u&&1==u){h.find("option:selected").prop("selected",!1),d.prop("selected",!0);var m=n.parent().data("optgroup");t.$menuInner.find('[data-optgroup="'+m+'"]').removeClass("selected"),t.setSelected(s,!0)}else{var b="string"==typeof t.options.maxOptionsText?[t.options.maxOptionsText,t.options.maxOptionsText]:t.options.maxOptionsText,v="function"==typeof b?b(p,u):b,y=v[0].replace("{n}",p),x=v[1].replace("{n}",u),C=e('<div class="notify"></div>');v[2]&&(y=y.replace("{var}",v[2][p>1?0:1]),x=x.replace("{var}",v[2][u>1?0:1])),d.prop("selected",!1),t.$menu.append(C),p&&f&&(C.append(e("<div>"+y+"</div>")),l=!1,t.$element.trigger("maxReached.bs.select")),u&&g&&(C.append(e("<div>"+x+"</div>")),l=!1,t.$element.trigger("maxReachedGrp.bs.select")),setTimeout(function(){t.setSelected(s,!1)},10),C.delay(750).fadeOut(300,function(){e(this).remove()})}}}else r.prop("selected",!1),d.prop("selected",!0),t.$menuInner.find(".selected").removeClass("selected"),t.setSelected(s,!0);!t.multiple||t.multiple&&1===t.options.maxOptions?t.$button.focus():t.options.liveSearch&&t.$searchbox.focus(),l&&(o!=t.$element.val()&&t.multiple||a!=t.$element.prop("selectedIndex")&&!t.multiple)&&t.$element.trigger("changed.bs.select",[s,d.prop("selected"),c]).triggerNative("change")}}),this.$menu.on("click","li.disabled a, .popover-title, .popover-title :not(.close)",function(i){i.currentTarget==this&&(i.preventDefault(),i.stopPropagation(),t.options.liveSearch&&!e(i.target).hasClass("close")?t.$searchbox.focus():t.$button.focus())}),this.$menuInner.on("click",".divider, .dropdown-header",function(e){e.preventDefault(),e.stopPropagation(),t.options.liveSearch?t.$searchbox.focus():t.$button.focus()}),this.$menu.on("click",".popover-title .close",function(){t.$button.click()}),this.$searchbox.on("click",function(e){e.stopPropagation()}),this.$menu.on("click",".actions-btn",function(i){t.options.liveSearch?t.$searchbox.focus():t.$button.focus(),i.preventDefault(),i.stopPropagation(),e(this).hasClass("bs-select-all")?t.selectAll():t.deselectAll()}),this.$element.change(function(){t.render(!1)})},liveSearchListener:function(){var n=this,s=e('<li class="no-results"></li>');this.$button.on("click.dropdown.data-api touchstart.dropdown.data-api",function(){n.$menuInner.find(".active").removeClass("active"),n.$searchbox.val()&&(n.$searchbox.val(""),n.$lis.not(".is-hidden").removeClass("hidden"),s.parent().length&&s.remove()),n.multiple||n.$menuInner.find(".selected").addClass("active"),setTimeout(function(){n.$searchbox.focus()},10)}),this.$searchbox.on("click.dropdown.data-api focus.dropdown.data-api touchend.dropdown.data-api",function(e){e.stopPropagation()}),this.$searchbox.on("input propertychange",function(){if(n.$searchbox.val()){var o=n.$lis.not(".is-hidden").removeClass("hidden").children("a");o=n.options.liveSearchNormalize?o.not(":a"+n._searchStyle()+'("'+t(n.$searchbox.val())+'")'):o.not(":"+n._searchStyle()+'("'+n.$searchbox.val()+'")'),o.parent().addClass("hidden"),n.$lis.filter(".dropdown-header").each(function(){var t=e(this),i=t.data("optgroup");0===n.$lis.filter("[data-optgroup="+i+"]").not(t).not(".hidden").length&&(t.addClass("hidden"),n.$lis.filter("[data-optgroup="+i+"div]").addClass("hidden"))});var a=n.$lis.not(".hidden");a.each(function(t){var i=e(this);i.hasClass("divider")&&(i.index()===a.first().index()||i.index()===a.last().index()||a.eq(t+1).hasClass("divider"))&&i.addClass("hidden")}),n.$lis.not(".hidden, .no-results").length?s.parent().length&&s.remove():(s.parent().length&&s.remove(),s.html(n.options.noneResultsText.replace("{0}",'"'+i(n.$searchbox.val())+'"')).show(),n.$menuInner.append(s))}else n.$lis.not(".is-hidden").removeClass("hidden"),s.parent().length&&s.remove();n.$lis.filter(".active").removeClass("active"),n.$searchbox.val()&&n.$lis.not(".hidden, .divider, .dropdown-header").eq(0).addClass("active").children("a").focus(),e(this).focus()})},_searchStyle:function(){var e={begins:"ibegins",startsWith:"ibegins"};return e[this.options.liveSearchStyle]||"icontains"},val:function(e){return"undefined"!=typeof e?(this.$element.val(e),this.render(),this.$element):this.$element.val()},changeAll:function(t){if(this.multiple){"undefined"==typeof t&&(t=!0),this.findLis();var i=this.$element.find("option"),n=this.$lis.not(".divider, .dropdown-header, .disabled, .hidden"),s=n.length,o=[];if(t){if(n.filter(".selected").length===n.length)return}else if(0===n.filter(".selected").length)return;n.toggleClass("selected",t);for(var a=0;a<s;a++){var l=n[a].getAttribute("data-original-index");o[o.length]=i.eq(l)[0]}e(o).prop("selected",t),this.render(!1),this.togglePlaceholder(),this.$element.trigger("changed.bs.select").triggerNative("change")}},selectAll:function(){return this.changeAll(!0)},deselectAll:function(){return this.changeAll(!1)},toggle:function(e){e=e||window.event,e&&e.stopPropagation(),this.$button.trigger("click")},keydown:function(i){var n,s,o,a,l,r,d,c,h,p=e(this),u=p.is("input")?p.parent().parent():p.parent(),f=u.data("this"),g=":not(.disabled, .hidden, .dropdown-header, .divider)",m={32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9"};if(f.options.liveSearch&&(u=p.parent().parent()),f.options.container&&(u=f.$menu),n=e("[role=menu] li",u),h=f.$newElement.hasClass("open"),!h&&(i.keyCode>=48&&i.keyCode<=57||i.keyCode>=96&&i.keyCode<=105||i.keyCode>=65&&i.keyCode<=90))return f.options.container?f.$button.trigger("click"):(f.setSize(),f.$menu.parent().addClass("open"),h=!0),void f.$searchbox.focus();if(f.options.liveSearch&&(/(^9$|27)/.test(i.keyCode.toString(10))&&h&&0===f.$menu.find(".active").length&&(i.preventDefault(),f.$menu.parent().removeClass("open"),f.options.container&&f.$newElement.removeClass("open"),f.$button.focus()),n=e("[role=menu] li"+g,u),p.val()||/(38|40)/.test(i.keyCode.toString(10))||0===n.filter(".active").length&&(n=f.$menuInner.find("li"),n=f.options.liveSearchNormalize?n.filter(":a"+f._searchStyle()+"("+t(m[i.keyCode])+")"):n.filter(":"+f._searchStyle()+"("+m[i.keyCode]+")"))),n.length){if(/(38|40)/.test(i.keyCode.toString(10)))s=n.index(n.find("a").filter(":focus").parent()),a=n.filter(g).first().index(),l=n.filter(g).last().index(),o=n.eq(s).nextAll(g).eq(0).index(),r=n.eq(s).prevAll(g).eq(0).index(),d=n.eq(o).prevAll(g).eq(0).index(),f.options.liveSearch&&(n.each(function(t){e(this).hasClass("disabled")||e(this).data("index",t)}),s=n.index(n.filter(".active")),a=n.first().data("index"),l=n.last().data("index"),o=n.eq(s).nextAll().eq(0).data("index"),r=n.eq(s).prevAll().eq(0).data("index"),d=n.eq(o).prevAll().eq(0).data("index")),c=p.data("prevIndex"),38==i.keyCode?(f.options.liveSearch&&s--,s!=d&&s>r&&(s=r),s<a&&(s=a),s==c&&(s=l)):40==i.keyCode&&(f.options.liveSearch&&s++,s==-1&&(s=0),s!=d&&s<o&&(s=o),s>l&&(s=l),s==c&&(s=a)),p.data("prevIndex",s),f.options.liveSearch?(i.preventDefault(),p.hasClass("dropdown-toggle")||(n.removeClass("active").eq(s).addClass("active").children("a").focus(),p.focus())):n.eq(s).children("a").focus();else if(!p.is("input")){var b,v,y=[];n.each(function(){e(this).hasClass("disabled")||e.trim(e(this).children("a").text().toLowerCase()).substring(0,1)==m[i.keyCode]&&y.push(e(this).index())}),b=e(document).data("keycount"),b++,e(document).data("keycount",b),v=e.trim(e(":focus").text().toLowerCase()).substring(0,1),v!=m[i.keyCode]?(b=1,e(document).data("keycount",b)):b>=y.length&&(e(document).data("keycount",0),b>y.length&&(b=1)),n.eq(y[b-1]).children("a").focus()}if((/(13|32)/.test(i.keyCode.toString(10))||/(^9$)/.test(i.keyCode.toString(10))&&f.options.selectOnTab)&&h){if(/(32)/.test(i.keyCode.toString(10))||i.preventDefault(),f.options.liveSearch)/(32)/.test(i.keyCode.toString(10))||(f.$menuInner.find(".active a").click(),p.focus());else{var x=e(":focus");x.click(),x.focus(),i.preventDefault(),e(document).data("spaceSelect",!0)}e(document).data("keycount",0)}(/(^9$|27)/.test(i.keyCode.toString(10))&&h&&(f.multiple||f.options.liveSearch)||/(27)/.test(i.keyCode.toString(10))&&!h)&&(f.$menu.parent().removeClass("open"),f.options.container&&f.$newElement.removeClass("open"),f.$button.focus())}},mobile:function(){this.$element.addClass("mobile-device")},refresh:function(){this.$lis=null,this.liObj={},this.reloadLi(),this.render(),this.checkDisabled(),this.liHeight(!0),this.setStyle(),this.setWidth(),this.$lis&&this.$searchbox.trigger("propertychange"),this.$element.trigger("refreshed.bs.select")},hide:function(){this.$newElement.hide()},show:function(){this.$newElement.show()},remove:function(){this.$newElement.remove(),this.$element.remove()},destroy:function(){this.$newElement.before(this.$element).remove(),this.$bsContainer?this.$bsContainer.remove():this.$menu.remove(),this.$element.off(".bs.select").removeData("selectpicker").removeClass("bs-select-hidden selectpicker")}};var o=e.fn.selectpicker;e.fn.selectpicker=n,e.fn.selectpicker.Constructor=s,e.fn.selectpicker.noConflict=function(){return e.fn.selectpicker=o,this},e(document).data("keycount",0).on("keydown.bs.select",'.bootstrap-select [data-toggle=dropdown], .bootstrap-select [role="menu"], .bs-searchbox input',s.prototype.keydown).on("focusin.modal",'.bootstrap-select [data-toggle=dropdown], .bootstrap-select [role="menu"], .bs-searchbox input',function(e){e.stopPropagation()}),e(window).on("load.bs.select.data-api",function(){e(".selectpicker").each(function(){var t=e(this);n.call(t,t.data())})})}(e)}),function(e){jQuery.fn.extend({slimScroll:function(i){var n={width:"auto",height:"250px",size:"7px",color:"#000",position:"right",distance:"1px",start:"top",opacity:.4,alwaysVisible:!1,disableFadeOut:!1,railVisible:!1,railColor:"#333",railOpacity:.2,railDraggable:!0,railClass:"slimScrollRail",barClass:"slimScrollBar",wrapperClass:"slimScrollDiv",allowPageScroll:!1,wheelStep:20,touchScrollStep:200,borderRadius:"7px",railBorderRadius:"7px"},s=e.extend(n,i);return this.each(function(){function n(t){if(c){var t=t||window.event,i=0;t.wheelDelta&&(i=-t.wheelDelta/120),t.detail&&(i=t.detail/3);var n=t.target||t.srcTarget||t.srcElement;e(n).closest("."+s.wrapperClass).is(C.parent())&&o(i,!0),t.preventDefault&&!x&&t.preventDefault(),x||(t.returnValue=!1)}}function o(e,t,i){x=!1;var n=e,o=C.outerHeight()-O.outerHeight();if(t&&(n=parseInt(O.css("top"))+e*parseInt(s.wheelStep)/100*O.outerHeight(),n=Math.min(Math.max(n,0),o),n=e>0?Math.ceil(n):Math.floor(n),O.css({top:n+"px"})),m=parseInt(O.css("top"))/(C.outerHeight()-O.outerHeight()),n=m*(C[0].scrollHeight-C.outerHeight()),i){n=e;var a=n/C[0].scrollHeight*C.outerHeight();a=Math.min(Math.max(a,0),o),O.css({top:a+"px"})}C.scrollTop(n),C.trigger("slimscrolling",~~n),r(),d()}function a(){window.addEventListener?(this.addEventListener("DOMMouseScroll",n,!1),this.addEventListener("mousewheel",n,!1),this.addEventListener("MozMousePixelScroll",n,!1)):document.attachEvent("onmousewheel",n)}function l(){g=Math.max(C.outerHeight()/C[0].scrollHeight*C.outerHeight(),y),O.css({height:g+"px"});var e=g==C.outerHeight()?"none":"block";O.css({display:e})}function r(){if(l(),clearTimeout(u),m==~~m){if(x=s.allowPageScroll,b!=m){var e=0==~~m?"top":"bottom";C.trigger("slimscroll",e)}}else x=!1;return b=m,g>=C.outerHeight()?void(x=!0):(O.stop(!0,!0).fadeIn("fast"),void(s.railVisible&&S.stop(!0,!0).fadeIn("fast")))}function d(){s.alwaysVisible||(u=setTimeout(function(){s.disableFadeOut&&c||h||p||(O.fadeOut("slow"),S.fadeOut("slow"))},1e3))}var c,h,p,u,f,g,m,b,v="<div></div>",y=30,x=!1,C=e(this);if(C.parent().hasClass(s.wrapperClass)){var w=C.scrollTop();if(O=C.parent().find("."+s.barClass),S=C.parent().find("."+s.railClass),l(),e.isPlainObject(i)){if("height"in i&&"auto"==i.height){C.parent().css("height","auto"),C.css("height","auto");var $=C.parent().parent().height();C.parent().css("height",$),C.css("height",$)}if("scrollTo"in i)w=parseInt(s.scrollTo);else if("scrollBy"in i)w+=parseInt(s.scrollBy);else if("destroy"in i)return O.remove(),S.remove(),void C.unwrap();o(w,!1,!0)}}else{s.height="auto"==s.height?C.parent().height():s.height;var k=e(v).addClass(s.wrapperClass).css({position:"relative",overflow:"hidden",width:s.width,height:s.height});C.css({overflow:"hidden",width:s.width,height:s.height});var S=e(v).addClass(s.railClass).css({width:s.size,height:"100%",position:"absolute",top:0,display:s.alwaysVisible&&s.railVisible?"block":"none","border-radius":s.railBorderRadius,background:s.railColor,opacity:s.railOpacity,zIndex:90}),O=e(v).addClass(s.barClass).css({background:s.color,width:s.size,position:"absolute",top:0,opacity:s.opacity,display:s.alwaysVisible?"block":"none","border-radius":s.borderRadius,BorderRadius:s.borderRadius,MozBorderRadius:s.borderRadius,WebkitBorderRadius:s.borderRadius,zIndex:99}),N="right"==s.position?{right:s.distance}:{left:s.distance};S.css(N),O.css(N),C.wrap(k),C.parent().append(O),C.parent().append(S),s.railDraggable&&O.bind("mousedown",function(i){var n=e(document);return p=!0,t=parseFloat(O.css("top")),pageY=i.pageY,n.bind("mousemove.slimscroll",function(e){currTop=t+e.pageY-pageY,O.css("top",currTop),o(0,O.position().top,!1)}),n.bind("mouseup.slimscroll",function(e){p=!1,d(),n.unbind(".slimscroll")}),!1}).bind("selectstart.slimscroll",function(e){return e.stopPropagation(),e.preventDefault(),!1}),S.hover(function(){r()},function(){d()}),O.hover(function(){h=!0},function(){h=!1}),C.hover(function(){c=!0,r(),d()},function(){c=!1,d()}),C.bind("touchstart",function(e,t){e.originalEvent.touches.length&&(f=e.originalEvent.touches[0].pageY)}),C.bind("touchmove",function(e){if(x||e.originalEvent.preventDefault(),e.originalEvent.touches.length){var t=(f-e.originalEvent.touches[0].pageY)/s.touchScrollStep;o(t,!0),f=e.originalEvent.touches[0].pageY}}),l(),"bottom"===s.start?(O.css({top:C.outerHeight()-O.outerHeight()}),o(0,!0)):"top"!==s.start&&(o(e(s.start).position().top,null,!0),s.alwaysVisible||O.hide()),a()}}),this}}),jQuery.fn.extend({slimscroll:jQuery.fn.slimScroll})}(jQuery),function(e,t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],function(i){return e.waitingDialog=t(i)}):e.waitingDialog=e.waitingDialog||t(e.jQuery)}(this,function(e){"use strict";function t(t){return t&&t.remove(),e('<div class="modal fade" data-backdrop="static" data-keyboard="false" tabindex="-1" role="dialog" aria-hidden="true" style="padding-top:15%; overflow-y:visible;"><div class="modal-dialog modal-m"><div class="modal-content text-center"><div class="modal-header p-b-xs no-border" style="display: none;"></div><div class="modal-body"><i class="fa fa-spinner fa-pulse fa-3x fa-fw"></i></div></div></div></div>')}var i,n;return{show:function(s,o){"undefined"==typeof o&&(o={}),"undefined"==typeof s&&(s="加载中..."),n=e.extend({headerText:"",headerSize:4,headerClass:"",dialogSize:"sm",progressType:"",contentElement:"p",contentClass:"content",onHide:null,onShow:null},o);var a,l;i=t(i),i.find(".modal-dialog").attr("class","modal-dialog").addClass("modal-"+n.dialogSize),i.find(".progress-bar").attr("class","progress-bar"),n.progressType&&i.find(".progress-bar").addClass("progress-bar-"+n.progressType),a=e("<h"+n.headerSize+" />"),a.css({margin:0}),n.headerClass&&a.addClass(n.headerClass),l=e("<"+n.contentElement+" />"),n.contentClass&&l.addClass(n.contentClass),n.headerText===!1?(l.html(s),i.find(".modal-body").prepend(l)):n.headerText?(a.html(n.headerText),i.find(".modal-header").html(a).show(),l.html(s),i.find(".modal-body").prepend(l)):(a.html(s),i.find(".modal-header").html(a).show()),"function"==typeof n.onHide&&i.off("hidden.bs.modal").on("hidden.bs.modal",function(){n.onHide.call(i)}),"function"==typeof n.onShow&&i.off("shown.bs.modal").on("shown.bs.modal",function(){n.onShow.call(i)}),i.modal()},hide:function(){"undefined"!=typeof i&&i.modal("hide")},message:function(e){if("undefined"!=typeof i)return"undefined"!=typeof e?i.find(".modal-header>h"+n.headerSize).html(e):i.find(".modal-header>h"+n.headerSize).html()}}});